<!doctype html>
<html lang="en">
<head>
<meta charset="utf-8">
<meta name="viewport" content="width=device-width, initial-scale=1, minimum-scale=1" />
<meta name="generator" content="pdoc 0.7.2" />
<title>baskerville.models.config API documentation</title>
<meta name="description" content="" />
<link href='https://cdnjs.cloudflare.com/ajax/libs/normalize/8.0.0/normalize.min.css' rel='stylesheet'>
<link href='https://cdnjs.cloudflare.com/ajax/libs/10up-sanitize.css/8.0.0/sanitize.min.css' rel='stylesheet'>
<link href="https://cdnjs.cloudflare.com/ajax/libs/highlight.js/9.12.0/styles/github.min.css" rel="stylesheet">
<style>.flex{display:flex !important}body{line-height:1.5em}#content{padding:20px}#sidebar{padding:30px;overflow:hidden}.http-server-breadcrumbs{font-size:130%;margin:0 0 15px 0}#footer{font-size:.75em;padding:5px 30px;border-top:1px solid #ddd;text-align:right}#footer p{margin:0 0 0 1em;display:inline-block}#footer p:last-child{margin-right:30px}h1,h2,h3,h4,h5{font-weight:300}h1{font-size:2.5em;line-height:1.1em}h2{font-size:1.75em;margin:1em 0 .50em 0}h3{font-size:1.4em;margin:25px 0 10px 0}h4{margin:0;font-size:105%}a{color:#058;text-decoration:none;transition:color .3s ease-in-out}a:hover{color:#e82}.title code{font-weight:bold}h2[id^="header-"]{margin-top:2em}.ident{color:#900}pre code{background:#f8f8f8;font-size:.8em;line-height:1.4em}code{background:#f2f2f1;padding:1px 4px;overflow-wrap:break-word}h1 code{background:transparent}pre{background:#f8f8f8;border:0;border-top:1px solid #ccc;border-bottom:1px solid #ccc;margin:1em 0;padding:1ex}#http-server-module-list{display:flex;flex-flow:column}#http-server-module-list div{display:flex}#http-server-module-list dt{min-width:10%}#http-server-module-list p{margin-top:0}.toc ul,#index{list-style-type:none;margin:0;padding:0}#index code{background:transparent}#index h3{border-bottom:1px solid #ddd}#index ul{padding:0}#index h4{font-weight:bold}#index h4 + ul{margin-bottom:.6em}@media (min-width:200ex){#index .two-column{column-count:2}}@media (min-width:300ex){#index .two-column{column-count:3}}dl{margin-bottom:2em}dl dl:last-child{margin-bottom:4em}dd{margin:0 0 1em 3em}#header-classes + dl > dd{margin-bottom:3em}dd dd{margin-left:2em}dd p{margin:10px 0}.name{background:#eee;font-weight:bold;font-size:.85em;padding:5px 10px;display:inline-block;min-width:40%}.name:hover{background:#e0e0e0}.name > span:first-child{white-space:nowrap}.name.class > span:nth-child(2){margin-left:.4em}.inherited{color:#999;border-left:5px solid #eee;padding-left:1em}.inheritance em{font-style:normal;font-weight:bold}.desc h2{font-weight:400;font-size:1.25em}.desc h3{font-size:1em}.desc dt code{background:inherit}.source summary,.git-link-div{color:#666;text-align:right;font-weight:400;font-size:.8em;text-transform:uppercase}.source summary > *{white-space:nowrap;cursor:pointer}.git-link{color:inherit;margin-left:1em}.source pre{max-height:500px;overflow:auto;margin:0}.source pre code{font-size:12px;overflow:visible}.hlist{list-style:none}.hlist li{display:inline}.hlist li:after{content:',\2002'}.hlist li:last-child:after{content:none}.hlist .hlist{display:inline;padding-left:1em}img{max-width:100%}.admonition{padding:.1em .5em;margin-bottom:1em}.admonition-title{font-weight:bold}.admonition.note,.admonition.info,.admonition.important{background:#aef}.admonition.todo,.admonition.versionadded,.admonition.tip,.admonition.hint{background:#dfd}.admonition.warning,.admonition.versionchanged,.admonition.deprecated{background:#fd4}.admonition.error,.admonition.danger,.admonition.caution{background:lightpink}</style>
<style media="screen and (min-width: 700px)">@media screen and (min-width:700px){#sidebar{width:30%}#content{width:70%;max-width:100ch;padding:3em 4em;border-left:1px solid #ddd}pre code{font-size:1em}.item .name{font-size:1em}main{display:flex;flex-direction:row-reverse;justify-content:flex-end}.toc ul ul,#index ul{padding-left:1.5em}.toc > ul > li{margin-top:.5em}}</style>
<style media="print">@media print{#sidebar h1{page-break-before:always}.source{display:none}}@media print{*{background:transparent !important;color:#000 !important;box-shadow:none !important;text-shadow:none !important}a[href]:after{content:" (" attr(href) ")";font-size:90%}a[href][title]:after{content:none}abbr[title]:after{content:" (" attr(title) ")"}.ir a:after,a[href^="javascript:"]:after,a[href^="#"]:after{content:""}pre,blockquote{border:1px solid #999;page-break-inside:avoid}thead{display:table-header-group}tr,img{page-break-inside:avoid}img{max-width:100% !important}@page{margin:0.5cm}p,h2,h3{orphans:3;widows:3}h1,h2,h3,h4,h5,h6{page-break-after:avoid}}</style>
</head>
<body>
<main>
<article id="content">
<header>
<h1 class="title">Module <code>baskerville.models.config</code></h1>
</header>
<section id="section-intro">
<details class="source">
<summary>
<span>Expand source code</span>
</summary>
<pre><code class="python">import json
import os
import warnings
from datetime import datetime

import dateutil
from baskerville.util.helpers import get_logger, get_default_data_path, \
    SerializableMixin
from dateutil.tz import tzutc
from baskerville.features import FEATURES

logger = get_logger(__name__)


class ConfigError(Exception, SerializableMixin):
    &#34;&#34;&#34;
    Custom Error to be used in the configuration error report
    &#34;&#34;&#34;
    def __init__(self, message, fields, exception_type=ValueError):
        if isinstance(fields, str):
            fields = [fields]
        self.args = message, fields, exception_type.__name__

    def __str__(self):
        m, f, e = self.args
        return f&#39;({e}, `field(s)`: {&#34;,&#34;.join(f)}){m} &#39;


class ConfigErrorReport(object):
    &#34;&#34;&#34;
    Singleton configuration report - gathers all the errors from all the
    configuration instances
    &#34;&#34;&#34;
    def __init__(self):
        self._errors = []

    def __new__(cls, *args, **kwargs):
        if not hasattr(cls, &#39;_instance&#39;):
            cls._instance = super(ConfigErrorReport, cls).__new__(
                cls, *args, **kwargs
            )
        return cls._instance

    def __str__(self):
        for ce in self.errors:
            for m, fi, e in ce.args:
                logger.error(f&#39;Configuration option &#34;{fi}&#34;:{m} ({e})&#39;)

    @property
    def errors(self):
        return self._errors    \

    @property
    def serialized_errors(self):
        return [e.to_dict() for e in self.errors]

    def add_error(self, e):
        if isinstance(e, ConfigError):
            if e not in self._errors:
                self._errors.append(e)
            else:
                raise ValueError(f&#39;Duplicate error {str(e)}&#39;)
        else:
            raise ValueError(
                f&#39;Wrong type {type(e)}, only accepting {ConfigError.__name__}&#39;
            )

    def report(self):
        r = &#39;&#39;

        for e in self.errors:
            r += str(e) + &#39;\n&#39;

        return r


class Config(SerializableMixin):
    &#34;&#34;&#34;
    The base Config class
    &#34;&#34;&#34;
    _remove = (&#39;parent&#39;, &#39;errors&#39;, &#39;serialized_errors&#39;)

    def __init__(self, config_dict, parent=None):
        self.__dict__.update(**config_dict)
        self.parent = parent
        self._is_validated = False
        self._is_valid = False
        self._configuration_error_report = ConfigErrorReport()

    def __getattr__(self, attr, default=None):
        if not self._is_validated:
            logger.error(
                f&#39;{self.__class__.__name__} is not validated yet, &#39;
                f&#39;there may be inconsistencies.&#39;
            )
        return self.__dict__.get(attr, default)

    def __getitem__(self, attr):
        if not self._is_validated:
            logger.error(
                f&#39;{self.__class__.__name__} is not validated yet, &#39;
                f&#39;there may be inconsistencies.&#39;
            )
        return self.__dict__[attr]

    def __str__(self):
        d = {}
        for attr in dir(self):
            v = getattr(self, attr)
            if &#39;__&#39; not in attr and not callable(v):
                if hasattr(v, &#39;__dict__&#39;):
                    d[attr] = v.__dict__
                else:
                    d[attr] = v

        return str(d)

    @property
    def errors(self):
        return self._configuration_error_report.errors    \

    @property
    def serialized_errors(self):
        return self._configuration_error_report.serialized_errors

    def add_error(self, e):
        self._configuration_error_report.add_error(e)

    def report(self):
        return self._configuration_error_report.report()

    @classmethod
    def set_logger(cls, log_level=&#39;INFO&#39;, log_path=&#39;baskerville.log&#39;):
        global logger
        logger = get_logger(
            cls.__name__,
            logging_level=log_level,
            output_file=log_path
        )

    def validate(self):
        raise NotImplementedError(&#39;You called the base validate&#39;
                                  &#39;which is not implemented. Please, provide&#39;
                                  &#39;the implementation for it.&#39;)


class BaskervilleConfig(Config):
    &#34;&#34;&#34;
    Top level configuration, holds and can validate all sub-configs:
    - database   : mandatory
    - engine     : mandatory
    - spark      : mandatory
    - elastic_db : optional - depends on the chosen pipeline
    - misp_db    : optional - depends on the chosen pipeline
    - kafka      : optional - depends on the chosen pipeline

    &#34;&#34;&#34;
    database = None
    elastic_db = None
    misp_db = None
    engine = None
    kafka = None
    spark = None

    def __init__(self, config):
        super(BaskervilleConfig, self).__init__(config)
        self.database = DatabaseConfig(self.database)
        self.engine = EngineConfig(self.engine, self)

        # depending on the pipeline these may or may not be present
        if self.elastic_db:
            self.elastic_db = ElasticConfig(self.elastic_db)
        if self.misp_db:
            self.misp_db = MispConfig(self.misp_db)
        if self.kafka:
            self.kafka = KafkaConfig(self.kafka)
        if self.spark:
            self.spark = SparkConfig(self.spark)

    def validate(self):
        logger.debug(&#39;Validating BaskervilleConfig...&#39;)
        # these two should always be present:
        self.database.validate()
        self.engine.validate()

        if self.elastic_db:
            self.elastic_db.validate()
        else:
            logger.debug(&#39;No elasticsearch config&#39;)
        if self.misp_db:
            self.misp_db.validate()
        else:
            logger.debug(&#39;No misp config&#39;)
        if self.kafka:
            self.kafka.validate()
        else:
            logger.debug(&#39;No kafka config&#39;)
        if self.spark:
            self.spark.validate()
        else:
            logger.debug(&#39;No spark config&#39;)

        self._is_validated = True
        self._is_valid = len(self.errors) == 0
        if not self._is_valid:
            raise ValueError(
                f&#39;Invalid configuration: {self.report()}&#39;
            )

        return self


class EngineConfig(Config):
    &#34;&#34;&#34;
    The pipeline&#39;s configuration
    &#34;&#34;&#34;
    manual_es = None
    manual_rawlog = None
    simulation = None
    datetime_format = &#39;%Y-%m-%d %H:%M:%S&#39;
    cache_expire_time = None
    cache_load_past = False
    cross_reference = False
    model_path = None
    model_version_id = None
    extra_features = None
    verbose = False
    metrics = None
    data_config = None
    logpath = &#39;baskerville.log&#39;
    log_level = None
    time_bucket = 120
    all_features = None
    load_test = False

    def __init__(self, config, parent=None):
        super(EngineConfig, self).__init__(config, parent)
        if self.manual_es:
            self.manual_es = ManualEsConfig(self.manual_es, self)
        if self.manual_rawlog:
            self.manual_rawlog = ManualRawlogConfig(self.manual_rawlog, self)
        if self.simulation:
            self.simulation = SimulationConfig(self.simulation, self)
        if self.metrics:
            self.metrics = MetricsConfig(self.metrics)
        if self.data_config:
            self.data_config = DataParsingConfig(self.data_config)
        self.all_features = dict(
            (f.feature_name_from_class(), f) for f in FEATURES
        )

    def validate(self):
        logger.debug(&#39;Validating EngineConfig...&#39;)
        if self.load_test:
            self.load_test = int(self.load_test)
        if not self.manual_es and not self.manual_rawlog:
            self.add_error(ConfigError(
                &#39;Either manual_es or manual_rawlog config must be provided&#39;,
                [&#39;manual_es&#39;, &#39;manual_rawlog&#39;],
            ))
            # raise RuntimeError(
            #     &#39;Either manual_es or manual_rawlog config must be provided&#39;
            # )
        if self.model_version_id and self.model_path:
            self.add_error(ConfigError(
                &#39;Model version id and model path cannot both be specified.&#39;,
                [&#39;model_version_id&#39;, &#39;model_path&#39;],
            ))
            # raise RuntimeError(&#39;Model version id and model path cannot &#39;
            #                    &#39;both be specified.&#39;)
        if not self.logpath:
            self.logpath = &#39;baskerville.log&#39;
            warnings.warn(&#39;Path for the log file is not set, &#39;
                          &#39;setting it to {}&#39;.format(self.logpath))
        if not self.log_level:
            self.log_level = &#39;ERROR&#39;
            warnings.warn(&#39;No log level provided, default value set: ERROR&#39;)
        if self.manual_es:
            self.manual_es.validate()
        if self.manual_rawlog:
            self.manual_rawlog.validate()
        if self.simulation:
            self.simulation.validate()
        if self.data_config:
            self.data_config.validate()
        if self.metrics:
            self.metrics.validate()
        if not self.time_bucket:
            self.time_bucket = 120
            warnings.warn(&#39;Time bucket is set to the default 120 seconds.&#39;)
        if not self.time_bucket == 120:
            warnings.warn(&#39;Time bucket is NOT set to the default 120 seconds.&#39;)
        self.time_bucket = int(self.time_bucket)
        if not self.cache_expire_time:
            self.cache_expire_time = 86400
            warnings.warn(
                &#39;Cache expire time is set to the default 86400 seconds (1 day)&#39;
            )
        self.cache_expire_time = int(self.cache_expire_time)
        for f in self.extra_features:
            if f not in self.all_features:
                self.add_error(
                    ConfigError(f&#39;Unknown feature {f}.&#39;, [&#39;extra_features&#39;])
                )

        self._is_validated = True
        return self


class ManualEsConfig(Config):
    hosts = None
    start = None
    stop = None
    batch_length = None
    save_logs_dir = None

    def __init__(self, config, parent=None):
        super(ManualEsConfig, self).__init__(config, parent)

    def validate(self):
        logger.debug(&#39;Validating EsConfig...&#39;)

        if not self.hosts:
            self.hosts = None
        if self.start:
            try:
                self.start = datetime.strptime(
                    self.start, self.parent.datetime_format
                ).replace(tzinfo=tzutc())
            except ValueError as e:
                self.add_error(ConfigError(e.args[0], &#39;start&#39;))

        if self.stop:
            try:
                self.stop = datetime.strptime(
                    self.stop, self.parent.datetime_format
                ).replace(tzinfo=tzutc())
            except ValueError as e:
                self.add_error(ConfigError(e.args[0], &#39;stop&#39;))
        if self.batch_length:
            self.batch_length = float(self.batch_length)
        elif self.start and self.stop:
            self.batch_length = (self.stop - self.start).total_seconds() / 60.
        else:
            self.add_error(ConfigError(
                &#39;Neither batch length nor stop point specified.&#39;,
                [&#39;batch_length&#39;, &#39;stop&#39;],
            ))
            # raise ValueError(&#39;Neither batch length nor stop point specified.&#39;)
        if self.save_logs_dir:
            if not os.path.isdir(
                    &#39;/&#39;.join(self.save_logs_dir.rsplit(&#39;/&#39;)[:-1])):
                self.add_error(ConfigError(
                    &#39;Path for save_logs_dir does not exist.&#39;,
                    [&#39;save_logs_dir&#39;],
                ))
                # raise ValueError(&#39;Path for save_logs_dir does not exist.&#39;)

        self._is_validated = True
        return self


class ManualRawlogConfig(Config):
    raw_logs_paths = None

    def __init__(self, config, parent=None):
        super(ManualRawlogConfig, self).__init__(config, parent)

    def validate(self):
        logger.debug(&#39;Validating RawlogConfig...&#39;)
        if self.raw_logs_paths:
            for log in self.raw_logs_paths:
                # allow * for spark
                if not os.path.isfile(log) and &#39;*&#39; not in log:
                    self.add_error(ConfigError(
                        f&#39;File {log} does not exist.&#39;,
                        [&#39;raw_logs_paths&#39;],
                    ))
                    # raise ValueError(f&#39;File {log} does not exist.&#39;)
        else:
            self.raw_logs_paths = []

        self._is_validated = True
        return self


class SimulationConfig(Config):
    sleep = True
    verbose = False

    def __init__(self, config, parent=None):
        super(SimulationConfig, self).__init__(config, parent)

    def validate(self):
        logger.debug(&#39;Validating SimulationConfig...&#39;)

        self._is_validated = True
        return self


class ElasticConfig(Config):
    &#34;&#34;&#34;
    Configuration for ElasticSearch access.
    &#34;&#34;&#34;
    user = &#39;&#39;
    password = &#39;&#39;
    host = &#39;&#39;
    base_index = &#39;&#39;
    index_type = &#39;&#39;

    def __init__(self, config):
        super(ElasticConfig, self).__init__(config)

    def validate(self):
        logger.debug(&#39;Validating ElasticConfig...&#39;)
        if not self.host:
            warnings.warn(&#39;Elastic search host is empty. If you are not using&#39;
                          &#39; the Elasticsearch pipeline, ignore&#39;)

        self._is_validated = True
        return self


class MispConfig(Config):
    &#34;&#34;&#34;
    Configuration for access to a MISP instance
    &#34;&#34;&#34;
    misp_url = &#39;&#39;
    misp_key = &#39;&#39;
    misp_verifycert = True

    def __init__(self, config):
        super(MispConfig, self).__init__(config)

    def validate(self):
        logger.debug(&#39;Validating MispConfig...&#39;)
        if not self.misp_url:
            warnings.warn(&#39;Misp url is empty. If you are not using&#39;
                          &#39; the MISP database, ignore&#39;)
        if not self.misp_key:
            warnings.warn(&#39;Misp key is empty. If you are not using&#39;
                          &#39; the MISP database, ignore&#39;)

        self._is_validated = True
        return self


class MaintenanceConfig(Config):
    &#34;&#34;&#34;
    Configuration for the database maintenance processes, like data
    partitioning and data archiving. Optional
    &#34;&#34;&#34;
    template_folder = get_default_data_path()
    partition_table = &#39;request_sets&#39;
    partition_field = &#39;created_at&#39;
    partition_by = &#39;week&#39;
    data_partition = None
    data_archive = None
    keep_data_for = &#39;1 year&#39;

    def __init__(self, config, parent=None):
        super().__init__(config, parent)
        if self.data_partition:
            self.data_partition = DataPartitionConfig(
                self.data_partition
            )
        if self.data_archive:
            self.data_archive = DataArchiveConfig(
                self.data_archive
            )

    def validate(self):
        logger.debug(&#39;Validating MaintenanceConfig...&#39;)
        if self.keep_data_for:
            split_kdf = self.keep_data_for.split(&#39; &#39;)
            if not len(split_kdf) == 2:
                raise ValueError(
                    f&#39;Wrong value for \&#39;keep_data_for\&#39;:{self.keep_data_for}&#39;
                )
            num = int(split_kdf[0])
            unit = split_kdf[1]

            if unit not in [&#39;year&#39;, &#39;years&#39;, &#39;month&#39;, &#39;months&#39;, &#39;week&#39;,
                            &#39;weeks&#39;]:
                raise ValueError(
                    f&#39;Wrong unit for \&#39;keep_data_for\&#39;:{unit}&#39;
                )

            if &#39;year&#39; in unit:
                pass

        if self.partition_by not in [&#39;week&#39;, &#39;month&#39;]:
            raise ValueError(
                f&#39;{self.__class__.__name__}: invalid option &#39;
                f&#39;for partition_by {self.partition_by}&#39;
            )
        if self.data_partition:
            self.data_partition = self.data_partition.validate()
        if self.data_archive:
            self.data_archive = self.data_archive.validate()

        if (self.data_partition or self.data_archive) and \
                not os.path.isdir(self.template_folder):
            self.add_error(ConfigError(
                f&#39;Template folder not properly set: {self.template_folder}&#39;,
                [&#39;template_folder&#39;],
            ))
            # raise ValueError(
            #     f&#39;Template folder not properly set: {self.template_folder}&#39;
            # )
        self._is_validated = True
        return self


class DataPartitionConfig(Config):
    &#34;&#34;&#34;
    Configuration for the database partitioning
    &#34;&#34;&#34;
    since = None
    until = None
    index_by = [&#39;target&#39;, &#39;ip&#39;]

    template = &#39;data_partitioning.jinja2&#39;

    def validate(self):
        logger.debug(&#39;Validating DataPartitionConfig...&#39;)
        if isinstance(self.since, str):
            self.since = dateutil.parser.parse(self.since).replace(
                tzinfo=tzutc())
        if isinstance(self.until, str):
            self.until = dateutil.parser.parse(self.until).replace(
                tzinfo=tzutc())

        self._is_validated = True
        return self


class DataArchiveConfig(Config):
    &#34;&#34;&#34;
    Configuration for the data archive process.
    &#34;&#34;&#34;
    since = None
    until = None
    template = &#39;data_archive.jinja2&#39;

    def validate(self):
        logger.debug(&#39;Validating DataArchiveConfig...&#39;)
        if isinstance(self.since, str):
            self.since = dateutil.parser.parse(self.since).replace(
                tzinfo=tzutc())
        if isinstance(self.until, str):
            self.until = dateutil.parser.parse(self.until).replace(
                tzinfo=tzutc())
        self._is_validated = True
        return self


class DatabaseConfig(Config):
    &#34;&#34;&#34;
    Baskerville&#39;s database configuration - Mandatory.
    &#34;&#34;&#34;
    name = None
    user = None
    password = None
    host = &#39;&#39;
    port = None
    type = &#39;postgres&#39;
    maintenance = None

    def __init__(self, config, parent=None):
        super(DatabaseConfig, self).__init__(config, parent)
        if self.maintenance:
            self.maintenance = MaintenanceConfig(
                self.maintenance
            )

    def validate(self):
        logger.debug(&#39;Validating DatabaseConfig...&#39;)
        if not self.host:
            self.add_error(ConfigError(
                &#39;Database host is empty.&#39;,
                [&#39;host&#39;],
            ))
            # raise ValueError(&#39;Database host is empty.&#39;)
        if not self.name:
            self.add_error(ConfigError(
                &#39;Database name is empty.&#39;,
                [&#39;name&#39;],
            ))
            # raise ValueError(&#39;Database name is empty.&#39;)
        if not self.port:
            warnings.warn(&#39;Database port is empty. &#39;
                          &#39;The driver will be using the default value&#39;)
        if self.type not in (&#39;mysql&#39;, &#39;postgres&#39;):
            self.add_error(ConfigError(
                &#39;Not implemented database connection for &#39;
                &#39;{} type&#39;.format(self.type),
                [&#39;type&#39;],
                exception_type=NotImplementedError
            ))

            # raise NotImplementedError(
            #     &#39;Not implemented database connection for &#39;
            #     &#39;{} type&#39;.format(self.type)
            # )

        if self.maintenance:
            self.maintenance = self.maintenance.validate()

        self._is_validated = True
        return self


class KafkaConfig(Config):
    &#34;&#34;&#34;
    Configuration for access to a Kafka instance for the kafka pipeline.
    &#34;&#34;&#34;
    url = &#39;0.0.0.0:9092&#39;
    zookeeper = &#39;localhost:2181&#39;
    consume_topic = &#39;deflect.logs&#39;
    publish_logs = &#39;baskerville.logs&#39;
    publish_stats = &#39;baskerville.stats&#39;
    publish_predictions = &#39;baskerville.predictions&#39;
    ssl_truststore_password = &#39;&#39;
    ssl_truststore_location = &#39;&#39;

    def __init__(self, config):
        super(KafkaConfig, self).__init__(config)

    def validate(self):
        logger.debug(&#39;Validating KafkaConfig...&#39;)
        if not self.url:
            self.add_error(ConfigError(
                &#39;Kafka url is empty.&#39;,
                [&#39;url&#39;],
            ))
            # raise ValueError(&#39;Kafka url is empty.&#39;)
        if not self.zookeeper:
            # kafka client can be used without zookeeper
            warnings.warn(&#39;Zookeeper url is empty.&#39;)
        if not self.consume_topic:
            warnings.warn(&#39;Consume topic is empty. If you are not using &#39;
                          &#39;simulation or Realtime pipeline ignore this&#39;)
        if not self.publish_logs:
            warnings.warn(&#39;Publish logs is empty. If you are not using &#39;
                          &#39;simulation or Realtime pipeline ignore this&#39;)
        if not self.publish_stats:
            warnings.warn(&#39;Publish stats topic is empty. If you are not using &#39;
                          &#39;simulation or Realtime pipeline ignore this&#39;)
        if not self.publish_predictions:
            warnings.warn(
                &#39;Publish predictions topic is empty. If you are not using &#39;
                &#39;simulation or Realtime pipeline ignore this&#39;)

        self._is_validated = True
        return self


class SparkConfig(Config):
    &#34;&#34;&#34;
    Spark related configuration.
    &#34;&#34;&#34;
    app_name = None
    master = None
    parallelism = None
    log_conf = None
    log_level = None
    session_timezone = None
    shuffle_partitions = None
    spark_driver_memory = None
    db_driver = None
    jars = &#39;&#39;
    metrics_conf = None
    jar_packages = None
    jars_repositories = None
    event_log = None
    serializer = None
    kryoserializer_buffer_max = None
    kryoserializer_buffer = None
    driver_java_options = None
    executor_extra_java_options = None
    driver_extra_class_path = None
    spark_executor_instances = None
    spark_executor_cores = None
    spark_executor_memory = None
    spark_python_profile = False
    storage_level = None

    def __init__(self, config):
        super(SparkConfig, self).__init__(config)

    def validate(self):
        logger.debug(&#39;Validating SparkConfig...&#39;)
        from baskerville.spark.helpers import StorageLevelFactory

        if not self.storage_level:
            self.storage_level = StorageLevelFactory.get_storage_level(
                &#39;OFF_HEAP&#39;
            )
            logger.warn(&#39;Default spark storage level set to OFF_HEAP&#39;)
        else:
            self.storage_level = StorageLevelFactory.get_storage_level(
                self.storage_level
            )

        if not self.session_timezone:
            self.session_timezone = &#39;UTC&#39;
            logger.info(&#39;session_timezone not defined, set default: UTC&#39;)
        if not self.master:
            if self.parallelism and self.parallelism &gt; 0:
                self.master = &#39;local[{}]&#39;.format(self.parallelism)
            else:
                self.master = &#39;local&#39;
            warnings.warn(&#39;Master is empty, defalting to {}&#39;.format(
                self.master
            ))
            if self.log_conf == &#39;true&#39;:
                if not self.log_level:
                    warnings.warn(
                        &#39;You have set log_conf but not log_level, &#39;
                        &#39;the log level will be spark\&#39;s default&#39;.format(
                            self.master
                        )
                    )
        if isinstance(self.shuffle_partitions, str):
            try:
                self.shuffle_partitions = int(self.shuffle_partitions)
            except ValueError:
                self.add_error(ConfigError(
                    &#39;Spark shuffle_partitions should be an integer&#39;,
                    [&#39;shuffle_partitions&#39;],
                ))
                # raise ValueError(
                #     &#39;Spark shuffle_partitions should be an integer&#39;
                # )
        elif self.shuffle_partitions is None:
            self.shuffle_partitions = 14
            warnings.warn(&#39;Spark shuffle partitions are set to 14.&#39;)
        if not self.db_driver:
            self.add_error(ConfigError(
                &#39;Db driver cannot be empty&#39;,
                [&#39;db_driver&#39;],
            ))
            # raise ValueError(&#39;Db driver cannot be empty&#39;)
        if not self.event_log:
            self.event_log = &#39;false&#39;
        else:
            self.event_log = &#39;true&#39;

        if self.metrics_conf and not self.jar_packages:
            warnings.warn(&#39;Spark metrics configuration has been set but &#39;
                          &#39;jar packages is empty, &#39;
                          &#39;is this the correct behavior?&#39;)

        if not self.jars:
            warnings.warn(&#39;Spark jars is not defined, at least one jar for the&#39;
                          &#39;database connection should be defined, &#39;
                          &#39;please check.&#39;)

        if self.kryoserializer_buffer_max:
            if not isinstance(self.kryoserializer_buffer_max, str):
                self.add_error(ConfigError(
                    &#39;Wrong value for serializer_buffer_max, &#39;
                    &#39;please use string values, e.g.: \&#39;2048m\&#39; &#39;
                    &#39;(maximum value)&#39;,
                    [&#39;kryoserializer_buffer_max&#39;],
                ))
                # raise ValueError(&#39;Wrong value for serializer_buffer_max, &#39;
                #                  &#39;please use string values, e.g.: \&#39;2048m\&#39; &#39;
                #                  &#39;(maximum value)&#39;)
            if self.kryoserializer_buffer_max[-1] == &#39;m&#39; and \
                    int(self.kryoserializer_buffer_max[:-1]) &gt; 2048:
                self.add_error(ConfigError(
                    &#39;Spark serializer_buffer_max cannot be more than 2048m&#39;,
                    [&#39;kryoserializer_buffer_max&#39;],
                ))
                # raise ValueError(
                #     &#39;Spark serializer_buffer_max cannot be more than 2048m&#39;)

        if self.kryoserializer_buffer:
            if not isinstance(self.kryoserializer_buffer, str):
                self.add_error(ConfigError(
                    &#39;Wrong value for serializer_buffer, &#39;
                    &#39;please use string values, e.g.: \&#39;2048k\&#39;&#39;,
                    [&#39;kryoserializer_buffer&#39;],
                ))
                # raise ValueError(&#39;Wrong value for serializer_buffer, &#39;
                #                  &#39;please use string values, e.g.: \&#39;2048k\&#39;&#39;)
            if self.kryoserializer_buffer[-1] == &#39;k&#39; and \
                    int(self.kryoserializer_buffer[:-1]) &gt; 2048:
                self.add_error(ConfigError(
                    &#39;Spark serializer_buffer_max cannot be more than 2048k&#39;,
                    [&#39;serializer_buffer_max&#39;],
                ))
                # raise ValueError(
                #     &#39;Spark serializer_buffer_max cannot be more than 2048k&#39;)
            if self.kryoserializer_buffer[-1] == \
                    self.kryoserializer_buffer_max[-1]:
                if int(self.kryoserializer_buffer_max[:-1]) &lt; \
                        int(self.kryoserializer_buffer[:-1]):
                    self.add_error(ConfigError(
                        &#39;serializer_buffer\&#39;s value cannot be &#39;
                        &#39;greater than serializer_buffer_max&#39;,
                        [&#39;kryoserializer_buffer&#39;],
                    ))
                    # raise ValueError(&#39;serializer_buffer\&#39;s value cannot be &#39;
                    #                  &#39;greater than serializer_buffer_max&#39;)

        self._is_validated = True
        return self


class MetricsConfig(Config):
    port = 8998
    performance = None
    progress = False
    flag = True

    def __init__(self, config_dict):
        super(MetricsConfig, self).__init__(config_dict)

    def validate(self):
        logger.debug(&#39;Validating MetricsConfig...&#39;)
        if not self.flag and (self.performance or self.progress):
            warnings.warn(
                &#39;Metrics configuration exists but no flag was set. &#39;
                &#39;If you want to run the metrics exporter, &#39;
                &#39;run baskerville with the &#34;-e&#34; flag.&#39;
            )
        if self.flag and not self.performance and not self.progress:
            raise ValueError(f&#39;Metrics configuration is missing.&#39;)

        if not self.port:
            self.port = 8998
            warnings.warn(f&#39;Metrics port is set to default {self.port}&#39;)
        if not isinstance(self.port, int):
            self.port = int(self.port)

        self._is_validated = True
        return self


class DataParsingConfig(Config):
    &#34;&#34;&#34;
    The configuration for the incoming data parsing
    &#34;&#34;&#34;
    schema = None
    schema_obj = None
    parser = None
    group_by_cols = None
    timestamp_column = None

    def __init__(self, config_dict):
        super().__init__(config_dict)

    def validate(self):
        logger.debug(&#39;Validating DataParsingConfig...&#39;)
        from baskerville.models.log_parsers import LOG_PARSERS

        if not self.schema or not os.path.isfile(self.schema):
            self.add_error(ConfigError(&#39;Please provide a valid schema&#39;, &#39;schema&#39;))
        else:
            with open(self.schema) as sc:
                self.schema_obj = json.load(sc)
        if not self.parser:
            self.parser = LOG_PARSERS.values()[0]
            warnings.warn(f&#39;Log parser set to default: {self.parser.__name__}&#39;)
        if self.parser not in LOG_PARSERS:
            self.add_error(ConfigError(
                f&#39;Log parser {self.parser} has not been implemented.&#39;,
                [&#39;parser&#39;],
                exception_type=NotImplementedError
            ))

        if self.schema_obj:
            self.parser = LOG_PARSERS[self.parser](
                self.schema_obj, drop_row_if_missing=self.group_by_cols
            )

        if not self.timestamp_column:
            raise ValueError(&#39;A timestamp_column must be provided&#39;)

        self._is_validated = True
        return self</code></pre>
</details>
</section>
<section>
</section>
<section>
</section>
<section>
</section>
<section>
<h2 class="section-title" id="header-classes">Classes</h2>
<dl>
<dt id="baskerville.models.config.BaskervilleConfig"><code class="flex name class">
<span>class <span class="ident">BaskervilleConfig</span></span>
<span>(</span><span>config)</span>
</code></dt>
<dd>
<section class="desc"><p>Top level configuration, holds and can validate all sub-configs:
- database
: mandatory
- engine
: mandatory
- spark
: mandatory
- elastic_db : optional - depends on the chosen pipeline
- misp_db
: optional - depends on the chosen pipeline
- kafka
: optional - depends on the chosen pipeline</p></section>
<details class="source">
<summary>
<span>Expand source code</span>
</summary>
<pre><code class="python">class BaskervilleConfig(Config):
    &#34;&#34;&#34;
    Top level configuration, holds and can validate all sub-configs:
    - database   : mandatory
    - engine     : mandatory
    - spark      : mandatory
    - elastic_db : optional - depends on the chosen pipeline
    - misp_db    : optional - depends on the chosen pipeline
    - kafka      : optional - depends on the chosen pipeline

    &#34;&#34;&#34;
    database = None
    elastic_db = None
    misp_db = None
    engine = None
    kafka = None
    spark = None

    def __init__(self, config):
        super(BaskervilleConfig, self).__init__(config)
        self.database = DatabaseConfig(self.database)
        self.engine = EngineConfig(self.engine, self)

        # depending on the pipeline these may or may not be present
        if self.elastic_db:
            self.elastic_db = ElasticConfig(self.elastic_db)
        if self.misp_db:
            self.misp_db = MispConfig(self.misp_db)
        if self.kafka:
            self.kafka = KafkaConfig(self.kafka)
        if self.spark:
            self.spark = SparkConfig(self.spark)

    def validate(self):
        logger.debug(&#39;Validating BaskervilleConfig...&#39;)
        # these two should always be present:
        self.database.validate()
        self.engine.validate()

        if self.elastic_db:
            self.elastic_db.validate()
        else:
            logger.debug(&#39;No elasticsearch config&#39;)
        if self.misp_db:
            self.misp_db.validate()
        else:
            logger.debug(&#39;No misp config&#39;)
        if self.kafka:
            self.kafka.validate()
        else:
            logger.debug(&#39;No kafka config&#39;)
        if self.spark:
            self.spark.validate()
        else:
            logger.debug(&#39;No spark config&#39;)

        self._is_validated = True
        self._is_valid = len(self.errors) == 0
        if not self._is_valid:
            raise ValueError(
                f&#39;Invalid configuration: {self.report()}&#39;
            )

        return self</code></pre>
</details>
<h3>Ancestors</h3>
<ul class="hlist">
<li><a title="baskerville.models.config.Config" href="#baskerville.models.config.Config">Config</a></li>
<li><a title="baskerville.util.helpers.SerializableMixin" href="../util/helpers.html#baskerville.util.helpers.SerializableMixin">SerializableMixin</a></li>
</ul>
<h3>Class variables</h3>
<dl>
<dt id="baskerville.models.config.BaskervilleConfig.database"><code class="name">var <span class="ident">database</span></code></dt>
<dd>
<section class="desc"></section>
</dd>
<dt id="baskerville.models.config.BaskervilleConfig.elastic_db"><code class="name">var <span class="ident">elastic_db</span></code></dt>
<dd>
<section class="desc"></section>
</dd>
<dt id="baskerville.models.config.BaskervilleConfig.engine"><code class="name">var <span class="ident">engine</span></code></dt>
<dd>
<section class="desc"></section>
</dd>
<dt id="baskerville.models.config.BaskervilleConfig.kafka"><code class="name">var <span class="ident">kafka</span></code></dt>
<dd>
<section class="desc"></section>
</dd>
<dt id="baskerville.models.config.BaskervilleConfig.misp_db"><code class="name">var <span class="ident">misp_db</span></code></dt>
<dd>
<section class="desc"></section>
</dd>
<dt id="baskerville.models.config.BaskervilleConfig.spark"><code class="name">var <span class="ident">spark</span></code></dt>
<dd>
<section class="desc"></section>
</dd>
</dl>
<h3>Methods</h3>
<dl>
<dt id="baskerville.models.config.BaskervilleConfig.validate"><code class="name flex">
<span>def <span class="ident">validate</span></span>(<span>self)</span>
</code></dt>
<dd>
<section class="desc"></section>
<details class="source">
<summary>
<span>Expand source code</span>
</summary>
<pre><code class="python">def validate(self):
    logger.debug(&#39;Validating BaskervilleConfig...&#39;)
    # these two should always be present:
    self.database.validate()
    self.engine.validate()

    if self.elastic_db:
        self.elastic_db.validate()
    else:
        logger.debug(&#39;No elasticsearch config&#39;)
    if self.misp_db:
        self.misp_db.validate()
    else:
        logger.debug(&#39;No misp config&#39;)
    if self.kafka:
        self.kafka.validate()
    else:
        logger.debug(&#39;No kafka config&#39;)
    if self.spark:
        self.spark.validate()
    else:
        logger.debug(&#39;No spark config&#39;)

    self._is_validated = True
    self._is_valid = len(self.errors) == 0
    if not self._is_valid:
        raise ValueError(
            f&#39;Invalid configuration: {self.report()}&#39;
        )

    return self</code></pre>
</details>
</dd>
</dl>
<h3>Inherited members</h3>
<ul class="hlist">
<li><code><b><a title="baskerville.models.config.Config" href="#baskerville.models.config.Config">Config</a></b></code>:
<ul class="hlist">
<li><code><a title="baskerville.models.config.Config.to_dict" href="../util/helpers.html#baskerville.util.helpers.SerializableMixin.to_dict">to_dict</a></code></li>
</ul>
</li>
</ul>
</dd>
<dt id="baskerville.models.config.Config"><code class="flex name class">
<span>class <span class="ident">Config</span></span>
<span>(</span><span>config_dict, parent=None)</span>
</code></dt>
<dd>
<section class="desc"><p>The base Config class</p></section>
<details class="source">
<summary>
<span>Expand source code</span>
</summary>
<pre><code class="python">class Config(SerializableMixin):
    &#34;&#34;&#34;
    The base Config class
    &#34;&#34;&#34;
    _remove = (&#39;parent&#39;, &#39;errors&#39;, &#39;serialized_errors&#39;)

    def __init__(self, config_dict, parent=None):
        self.__dict__.update(**config_dict)
        self.parent = parent
        self._is_validated = False
        self._is_valid = False
        self._configuration_error_report = ConfigErrorReport()

    def __getattr__(self, attr, default=None):
        if not self._is_validated:
            logger.error(
                f&#39;{self.__class__.__name__} is not validated yet, &#39;
                f&#39;there may be inconsistencies.&#39;
            )
        return self.__dict__.get(attr, default)

    def __getitem__(self, attr):
        if not self._is_validated:
            logger.error(
                f&#39;{self.__class__.__name__} is not validated yet, &#39;
                f&#39;there may be inconsistencies.&#39;
            )
        return self.__dict__[attr]

    def __str__(self):
        d = {}
        for attr in dir(self):
            v = getattr(self, attr)
            if &#39;__&#39; not in attr and not callable(v):
                if hasattr(v, &#39;__dict__&#39;):
                    d[attr] = v.__dict__
                else:
                    d[attr] = v

        return str(d)

    @property
    def errors(self):
        return self._configuration_error_report.errors    \

    @property
    def serialized_errors(self):
        return self._configuration_error_report.serialized_errors

    def add_error(self, e):
        self._configuration_error_report.add_error(e)

    def report(self):
        return self._configuration_error_report.report()

    @classmethod
    def set_logger(cls, log_level=&#39;INFO&#39;, log_path=&#39;baskerville.log&#39;):
        global logger
        logger = get_logger(
            cls.__name__,
            logging_level=log_level,
            output_file=log_path
        )

    def validate(self):
        raise NotImplementedError(&#39;You called the base validate&#39;
                                  &#39;which is not implemented. Please, provide&#39;
                                  &#39;the implementation for it.&#39;)</code></pre>
</details>
<h3>Ancestors</h3>
<ul class="hlist">
<li><a title="baskerville.util.helpers.SerializableMixin" href="../util/helpers.html#baskerville.util.helpers.SerializableMixin">SerializableMixin</a></li>
</ul>
<h3>Subclasses</h3>
<ul class="hlist">
<li><a title="baskerville.models.config.BaskervilleConfig" href="#baskerville.models.config.BaskervilleConfig">BaskervilleConfig</a></li>
<li><a title="baskerville.models.config.EngineConfig" href="#baskerville.models.config.EngineConfig">EngineConfig</a></li>
<li><a title="baskerville.models.config.ManualEsConfig" href="#baskerville.models.config.ManualEsConfig">ManualEsConfig</a></li>
<li><a title="baskerville.models.config.ManualRawlogConfig" href="#baskerville.models.config.ManualRawlogConfig">ManualRawlogConfig</a></li>
<li><a title="baskerville.models.config.SimulationConfig" href="#baskerville.models.config.SimulationConfig">SimulationConfig</a></li>
<li><a title="baskerville.models.config.ElasticConfig" href="#baskerville.models.config.ElasticConfig">ElasticConfig</a></li>
<li><a title="baskerville.models.config.MispConfig" href="#baskerville.models.config.MispConfig">MispConfig</a></li>
<li><a title="baskerville.models.config.MaintenanceConfig" href="#baskerville.models.config.MaintenanceConfig">MaintenanceConfig</a></li>
<li><a title="baskerville.models.config.DataPartitionConfig" href="#baskerville.models.config.DataPartitionConfig">DataPartitionConfig</a></li>
<li><a title="baskerville.models.config.DataArchiveConfig" href="#baskerville.models.config.DataArchiveConfig">DataArchiveConfig</a></li>
<li><a title="baskerville.models.config.DatabaseConfig" href="#baskerville.models.config.DatabaseConfig">DatabaseConfig</a></li>
<li><a title="baskerville.models.config.KafkaConfig" href="#baskerville.models.config.KafkaConfig">KafkaConfig</a></li>
<li><a title="baskerville.models.config.SparkConfig" href="#baskerville.models.config.SparkConfig">SparkConfig</a></li>
<li><a title="baskerville.models.config.MetricsConfig" href="#baskerville.models.config.MetricsConfig">MetricsConfig</a></li>
<li><a title="baskerville.models.config.DataParsingConfig" href="#baskerville.models.config.DataParsingConfig">DataParsingConfig</a></li>
</ul>
<h3>Static methods</h3>
<dl>
<dt id="baskerville.models.config.Config.set_logger"><code class="name flex">
<span>def <span class="ident">set_logger</span></span>(<span>log_level='INFO', log_path='baskerville.log')</span>
</code></dt>
<dd>
<section class="desc"></section>
<details class="source">
<summary>
<span>Expand source code</span>
</summary>
<pre><code class="python">@classmethod
def set_logger(cls, log_level=&#39;INFO&#39;, log_path=&#39;baskerville.log&#39;):
    global logger
    logger = get_logger(
        cls.__name__,
        logging_level=log_level,
        output_file=log_path
    )</code></pre>
</details>
</dd>
</dl>
<h3>Instance variables</h3>
<dl>
<dt id="baskerville.models.config.Config.errors"><code class="name">var <span class="ident">errors</span></code></dt>
<dd>
<section class="desc"></section>
<details class="source">
<summary>
<span>Expand source code</span>
</summary>
<pre><code class="python">@property
def errors(self):
    return self._configuration_error_report.errors    \</code></pre>
</details>
</dd>
<dt id="baskerville.models.config.Config.serialized_errors"><code class="name">var <span class="ident">serialized_errors</span></code></dt>
<dd>
<section class="desc"></section>
<details class="source">
<summary>
<span>Expand source code</span>
</summary>
<pre><code class="python">@property
def serialized_errors(self):
    return self._configuration_error_report.serialized_errors</code></pre>
</details>
</dd>
</dl>
<h3>Methods</h3>
<dl>
<dt id="baskerville.models.config.Config.add_error"><code class="name flex">
<span>def <span class="ident">add_error</span></span>(<span>self, e)</span>
</code></dt>
<dd>
<section class="desc"></section>
<details class="source">
<summary>
<span>Expand source code</span>
</summary>
<pre><code class="python">def add_error(self, e):
    self._configuration_error_report.add_error(e)</code></pre>
</details>
</dd>
<dt id="baskerville.models.config.Config.report"><code class="name flex">
<span>def <span class="ident">report</span></span>(<span>self)</span>
</code></dt>
<dd>
<section class="desc"></section>
<details class="source">
<summary>
<span>Expand source code</span>
</summary>
<pre><code class="python">def report(self):
    return self._configuration_error_report.report()</code></pre>
</details>
</dd>
<dt id="baskerville.models.config.Config.validate"><code class="name flex">
<span>def <span class="ident">validate</span></span>(<span>self)</span>
</code></dt>
<dd>
<section class="desc"></section>
<details class="source">
<summary>
<span>Expand source code</span>
</summary>
<pre><code class="python">def validate(self):
    raise NotImplementedError(&#39;You called the base validate&#39;
                              &#39;which is not implemented. Please, provide&#39;
                              &#39;the implementation for it.&#39;)</code></pre>
</details>
</dd>
</dl>
<h3>Inherited members</h3>
<ul class="hlist">
<li><code><b><a title="baskerville.util.helpers.SerializableMixin" href="../util/helpers.html#baskerville.util.helpers.SerializableMixin">SerializableMixin</a></b></code>:
<ul class="hlist">
<li><code><a title="baskerville.util.helpers.SerializableMixin.to_dict" href="../util/helpers.html#baskerville.util.helpers.SerializableMixin.to_dict">to_dict</a></code></li>
</ul>
</li>
</ul>
</dd>
<dt id="baskerville.models.config.ConfigError"><code class="flex name class">
<span>class <span class="ident">ConfigError</span></span>
<span>(</span><span>message, fields, exception_type=builtins.ValueError)</span>
</code></dt>
<dd>
<section class="desc"><p>Custom Error to be used in the configuration error report</p></section>
<details class="source">
<summary>
<span>Expand source code</span>
</summary>
<pre><code class="python">class ConfigError(Exception, SerializableMixin):
    &#34;&#34;&#34;
    Custom Error to be used in the configuration error report
    &#34;&#34;&#34;
    def __init__(self, message, fields, exception_type=ValueError):
        if isinstance(fields, str):
            fields = [fields]
        self.args = message, fields, exception_type.__name__

    def __str__(self):
        m, f, e = self.args
        return f&#39;({e}, `field(s)`: {&#34;,&#34;.join(f)}){m} &#39;</code></pre>
</details>
<h3>Ancestors</h3>
<ul class="hlist">
<li>builtins.Exception</li>
<li>builtins.BaseException</li>
<li><a title="baskerville.util.helpers.SerializableMixin" href="../util/helpers.html#baskerville.util.helpers.SerializableMixin">SerializableMixin</a></li>
</ul>
<h3>Inherited members</h3>
<ul class="hlist">
<li><code><b><a title="baskerville.util.helpers.SerializableMixin" href="../util/helpers.html#baskerville.util.helpers.SerializableMixin">SerializableMixin</a></b></code>:
<ul class="hlist">
<li><code><a title="baskerville.util.helpers.SerializableMixin.to_dict" href="../util/helpers.html#baskerville.util.helpers.SerializableMixin.to_dict">to_dict</a></code></li>
</ul>
</li>
</ul>
</dd>
<dt id="baskerville.models.config.ConfigErrorReport"><code class="flex name class">
<span>class <span class="ident">ConfigErrorReport</span></span>
</code></dt>
<dd>
<section class="desc"><p>Singleton configuration report - gathers all the errors from all the
configuration instances</p></section>
<details class="source">
<summary>
<span>Expand source code</span>
</summary>
<pre><code class="python">class ConfigErrorReport(object):
    &#34;&#34;&#34;
    Singleton configuration report - gathers all the errors from all the
    configuration instances
    &#34;&#34;&#34;
    def __init__(self):
        self._errors = []

    def __new__(cls, *args, **kwargs):
        if not hasattr(cls, &#39;_instance&#39;):
            cls._instance = super(ConfigErrorReport, cls).__new__(
                cls, *args, **kwargs
            )
        return cls._instance

    def __str__(self):
        for ce in self.errors:
            for m, fi, e in ce.args:
                logger.error(f&#39;Configuration option &#34;{fi}&#34;:{m} ({e})&#39;)

    @property
    def errors(self):
        return self._errors    \

    @property
    def serialized_errors(self):
        return [e.to_dict() for e in self.errors]

    def add_error(self, e):
        if isinstance(e, ConfigError):
            if e not in self._errors:
                self._errors.append(e)
            else:
                raise ValueError(f&#39;Duplicate error {str(e)}&#39;)
        else:
            raise ValueError(
                f&#39;Wrong type {type(e)}, only accepting {ConfigError.__name__}&#39;
            )

    def report(self):
        r = &#39;&#39;

        for e in self.errors:
            r += str(e) + &#39;\n&#39;

        return r</code></pre>
</details>
<h3>Instance variables</h3>
<dl>
<dt id="baskerville.models.config.ConfigErrorReport.errors"><code class="name">var <span class="ident">errors</span></code></dt>
<dd>
<section class="desc"></section>
<details class="source">
<summary>
<span>Expand source code</span>
</summary>
<pre><code class="python">@property
def errors(self):
    return self._errors    \</code></pre>
</details>
</dd>
<dt id="baskerville.models.config.ConfigErrorReport.serialized_errors"><code class="name">var <span class="ident">serialized_errors</span></code></dt>
<dd>
<section class="desc"></section>
<details class="source">
<summary>
<span>Expand source code</span>
</summary>
<pre><code class="python">@property
def serialized_errors(self):
    return [e.to_dict() for e in self.errors]</code></pre>
</details>
</dd>
</dl>
<h3>Methods</h3>
<dl>
<dt id="baskerville.models.config.ConfigErrorReport.add_error"><code class="name flex">
<span>def <span class="ident">add_error</span></span>(<span>self, e)</span>
</code></dt>
<dd>
<section class="desc"></section>
<details class="source">
<summary>
<span>Expand source code</span>
</summary>
<pre><code class="python">def add_error(self, e):
    if isinstance(e, ConfigError):
        if e not in self._errors:
            self._errors.append(e)
        else:
            raise ValueError(f&#39;Duplicate error {str(e)}&#39;)
    else:
        raise ValueError(
            f&#39;Wrong type {type(e)}, only accepting {ConfigError.__name__}&#39;
        )</code></pre>
</details>
</dd>
<dt id="baskerville.models.config.ConfigErrorReport.report"><code class="name flex">
<span>def <span class="ident">report</span></span>(<span>self)</span>
</code></dt>
<dd>
<section class="desc"></section>
<details class="source">
<summary>
<span>Expand source code</span>
</summary>
<pre><code class="python">def report(self):
    r = &#39;&#39;

    for e in self.errors:
        r += str(e) + &#39;\n&#39;

    return r</code></pre>
</details>
</dd>
</dl>
</dd>
<dt id="baskerville.models.config.DataArchiveConfig"><code class="flex name class">
<span>class <span class="ident">DataArchiveConfig</span></span>
<span>(</span><span>config_dict, parent=None)</span>
</code></dt>
<dd>
<section class="desc"><p>Configuration for the data archive process.</p></section>
<details class="source">
<summary>
<span>Expand source code</span>
</summary>
<pre><code class="python">class DataArchiveConfig(Config):
    &#34;&#34;&#34;
    Configuration for the data archive process.
    &#34;&#34;&#34;
    since = None
    until = None
    template = &#39;data_archive.jinja2&#39;

    def validate(self):
        logger.debug(&#39;Validating DataArchiveConfig...&#39;)
        if isinstance(self.since, str):
            self.since = dateutil.parser.parse(self.since).replace(
                tzinfo=tzutc())
        if isinstance(self.until, str):
            self.until = dateutil.parser.parse(self.until).replace(
                tzinfo=tzutc())
        self._is_validated = True
        return self</code></pre>
</details>
<h3>Ancestors</h3>
<ul class="hlist">
<li><a title="baskerville.models.config.Config" href="#baskerville.models.config.Config">Config</a></li>
<li><a title="baskerville.util.helpers.SerializableMixin" href="../util/helpers.html#baskerville.util.helpers.SerializableMixin">SerializableMixin</a></li>
</ul>
<h3>Class variables</h3>
<dl>
<dt id="baskerville.models.config.DataArchiveConfig.since"><code class="name">var <span class="ident">since</span></code></dt>
<dd>
<section class="desc"></section>
</dd>
<dt id="baskerville.models.config.DataArchiveConfig.template"><code class="name">var <span class="ident">template</span></code></dt>
<dd>
<section class="desc"><p>str(object='') -&gt; str
str(bytes_or_buffer[, encoding[, errors]]) -&gt; str</p>
<p>Create a new string object from the given object. If encoding or
errors is specified, then the object must expose a data buffer
that will be decoded using the given encoding and error handler.
Otherwise, returns the result of object.<strong>str</strong>() (if defined)
or repr(object).
encoding defaults to sys.getdefaultencoding().
errors defaults to 'strict'.</p></section>
</dd>
<dt id="baskerville.models.config.DataArchiveConfig.until"><code class="name">var <span class="ident">until</span></code></dt>
<dd>
<section class="desc"></section>
</dd>
</dl>
<h3>Methods</h3>
<dl>
<dt id="baskerville.models.config.DataArchiveConfig.validate"><code class="name flex">
<span>def <span class="ident">validate</span></span>(<span>self)</span>
</code></dt>
<dd>
<section class="desc"></section>
<details class="source">
<summary>
<span>Expand source code</span>
</summary>
<pre><code class="python">def validate(self):
    logger.debug(&#39;Validating DataArchiveConfig...&#39;)
    if isinstance(self.since, str):
        self.since = dateutil.parser.parse(self.since).replace(
            tzinfo=tzutc())
    if isinstance(self.until, str):
        self.until = dateutil.parser.parse(self.until).replace(
            tzinfo=tzutc())
    self._is_validated = True
    return self</code></pre>
</details>
</dd>
</dl>
<h3>Inherited members</h3>
<ul class="hlist">
<li><code><b><a title="baskerville.models.config.Config" href="#baskerville.models.config.Config">Config</a></b></code>:
<ul class="hlist">
<li><code><a title="baskerville.models.config.Config.to_dict" href="../util/helpers.html#baskerville.util.helpers.SerializableMixin.to_dict">to_dict</a></code></li>
</ul>
</li>
</ul>
</dd>
<dt id="baskerville.models.config.DataParsingConfig"><code class="flex name class">
<span>class <span class="ident">DataParsingConfig</span></span>
<span>(</span><span>config_dict)</span>
</code></dt>
<dd>
<section class="desc"><p>The configuration for the incoming data parsing</p></section>
<details class="source">
<summary>
<span>Expand source code</span>
</summary>
<pre><code class="python">class DataParsingConfig(Config):
    &#34;&#34;&#34;
    The configuration for the incoming data parsing
    &#34;&#34;&#34;
    schema = None
    schema_obj = None
    parser = None
    group_by_cols = None
    timestamp_column = None

    def __init__(self, config_dict):
        super().__init__(config_dict)

    def validate(self):
        logger.debug(&#39;Validating DataParsingConfig...&#39;)
        from baskerville.models.log_parsers import LOG_PARSERS

        if not self.schema or not os.path.isfile(self.schema):
            self.add_error(ConfigError(&#39;Please provide a valid schema&#39;, &#39;schema&#39;))
        else:
            with open(self.schema) as sc:
                self.schema_obj = json.load(sc)
        if not self.parser:
            self.parser = LOG_PARSERS.values()[0]
            warnings.warn(f&#39;Log parser set to default: {self.parser.__name__}&#39;)
        if self.parser not in LOG_PARSERS:
            self.add_error(ConfigError(
                f&#39;Log parser {self.parser} has not been implemented.&#39;,
                [&#39;parser&#39;],
                exception_type=NotImplementedError
            ))

        if self.schema_obj:
            self.parser = LOG_PARSERS[self.parser](
                self.schema_obj, drop_row_if_missing=self.group_by_cols
            )

        if not self.timestamp_column:
            raise ValueError(&#39;A timestamp_column must be provided&#39;)

        self._is_validated = True
        return self</code></pre>
</details>
<h3>Ancestors</h3>
<ul class="hlist">
<li><a title="baskerville.models.config.Config" href="#baskerville.models.config.Config">Config</a></li>
<li><a title="baskerville.util.helpers.SerializableMixin" href="../util/helpers.html#baskerville.util.helpers.SerializableMixin">SerializableMixin</a></li>
</ul>
<h3>Class variables</h3>
<dl>
<dt id="baskerville.models.config.DataParsingConfig.group_by_cols"><code class="name">var <span class="ident">group_by_cols</span></code></dt>
<dd>
<section class="desc"></section>
</dd>
<dt id="baskerville.models.config.DataParsingConfig.parser"><code class="name">var <span class="ident">parser</span></code></dt>
<dd>
<section class="desc"></section>
</dd>
<dt id="baskerville.models.config.DataParsingConfig.schema"><code class="name">var <span class="ident">schema</span></code></dt>
<dd>
<section class="desc"></section>
</dd>
<dt id="baskerville.models.config.DataParsingConfig.schema_obj"><code class="name">var <span class="ident">schema_obj</span></code></dt>
<dd>
<section class="desc"></section>
</dd>
<dt id="baskerville.models.config.DataParsingConfig.timestamp_column"><code class="name">var <span class="ident">timestamp_column</span></code></dt>
<dd>
<section class="desc"></section>
</dd>
</dl>
<h3>Methods</h3>
<dl>
<dt id="baskerville.models.config.DataParsingConfig.validate"><code class="name flex">
<span>def <span class="ident">validate</span></span>(<span>self)</span>
</code></dt>
<dd>
<section class="desc"></section>
<details class="source">
<summary>
<span>Expand source code</span>
</summary>
<pre><code class="python">def validate(self):
    logger.debug(&#39;Validating DataParsingConfig...&#39;)
    from baskerville.models.log_parsers import LOG_PARSERS

    if not self.schema or not os.path.isfile(self.schema):
        self.add_error(ConfigError(&#39;Please provide a valid schema&#39;, &#39;schema&#39;))
    else:
        with open(self.schema) as sc:
            self.schema_obj = json.load(sc)
    if not self.parser:
        self.parser = LOG_PARSERS.values()[0]
        warnings.warn(f&#39;Log parser set to default: {self.parser.__name__}&#39;)
    if self.parser not in LOG_PARSERS:
        self.add_error(ConfigError(
            f&#39;Log parser {self.parser} has not been implemented.&#39;,
            [&#39;parser&#39;],
            exception_type=NotImplementedError
        ))

    if self.schema_obj:
        self.parser = LOG_PARSERS[self.parser](
            self.schema_obj, drop_row_if_missing=self.group_by_cols
        )

    if not self.timestamp_column:
        raise ValueError(&#39;A timestamp_column must be provided&#39;)

    self._is_validated = True
    return self</code></pre>
</details>
</dd>
</dl>
<h3>Inherited members</h3>
<ul class="hlist">
<li><code><b><a title="baskerville.models.config.Config" href="#baskerville.models.config.Config">Config</a></b></code>:
<ul class="hlist">
<li><code><a title="baskerville.models.config.Config.to_dict" href="../util/helpers.html#baskerville.util.helpers.SerializableMixin.to_dict">to_dict</a></code></li>
</ul>
</li>
</ul>
</dd>
<dt id="baskerville.models.config.DataPartitionConfig"><code class="flex name class">
<span>class <span class="ident">DataPartitionConfig</span></span>
<span>(</span><span>config_dict, parent=None)</span>
</code></dt>
<dd>
<section class="desc"><p>Configuration for the database partitioning</p></section>
<details class="source">
<summary>
<span>Expand source code</span>
</summary>
<pre><code class="python">class DataPartitionConfig(Config):
    &#34;&#34;&#34;
    Configuration for the database partitioning
    &#34;&#34;&#34;
    since = None
    until = None
    index_by = [&#39;target&#39;, &#39;ip&#39;]

    template = &#39;data_partitioning.jinja2&#39;

    def validate(self):
        logger.debug(&#39;Validating DataPartitionConfig...&#39;)
        if isinstance(self.since, str):
            self.since = dateutil.parser.parse(self.since).replace(
                tzinfo=tzutc())
        if isinstance(self.until, str):
            self.until = dateutil.parser.parse(self.until).replace(
                tzinfo=tzutc())

        self._is_validated = True
        return self</code></pre>
</details>
<h3>Ancestors</h3>
<ul class="hlist">
<li><a title="baskerville.models.config.Config" href="#baskerville.models.config.Config">Config</a></li>
<li><a title="baskerville.util.helpers.SerializableMixin" href="../util/helpers.html#baskerville.util.helpers.SerializableMixin">SerializableMixin</a></li>
</ul>
<h3>Class variables</h3>
<dl>
<dt id="baskerville.models.config.DataPartitionConfig.index_by"><code class="name">var <span class="ident">index_by</span></code></dt>
<dd>
<section class="desc"><p>list() -&gt; new empty list
list(iterable) -&gt; new list initialized from iterable's items</p></section>
</dd>
<dt id="baskerville.models.config.DataPartitionConfig.since"><code class="name">var <span class="ident">since</span></code></dt>
<dd>
<section class="desc"></section>
</dd>
<dt id="baskerville.models.config.DataPartitionConfig.template"><code class="name">var <span class="ident">template</span></code></dt>
<dd>
<section class="desc"><p>str(object='') -&gt; str
str(bytes_or_buffer[, encoding[, errors]]) -&gt; str</p>
<p>Create a new string object from the given object. If encoding or
errors is specified, then the object must expose a data buffer
that will be decoded using the given encoding and error handler.
Otherwise, returns the result of object.<strong>str</strong>() (if defined)
or repr(object).
encoding defaults to sys.getdefaultencoding().
errors defaults to 'strict'.</p></section>
</dd>
<dt id="baskerville.models.config.DataPartitionConfig.until"><code class="name">var <span class="ident">until</span></code></dt>
<dd>
<section class="desc"></section>
</dd>
</dl>
<h3>Methods</h3>
<dl>
<dt id="baskerville.models.config.DataPartitionConfig.validate"><code class="name flex">
<span>def <span class="ident">validate</span></span>(<span>self)</span>
</code></dt>
<dd>
<section class="desc"></section>
<details class="source">
<summary>
<span>Expand source code</span>
</summary>
<pre><code class="python">def validate(self):
    logger.debug(&#39;Validating DataPartitionConfig...&#39;)
    if isinstance(self.since, str):
        self.since = dateutil.parser.parse(self.since).replace(
            tzinfo=tzutc())
    if isinstance(self.until, str):
        self.until = dateutil.parser.parse(self.until).replace(
            tzinfo=tzutc())

    self._is_validated = True
    return self</code></pre>
</details>
</dd>
</dl>
<h3>Inherited members</h3>
<ul class="hlist">
<li><code><b><a title="baskerville.models.config.Config" href="#baskerville.models.config.Config">Config</a></b></code>:
<ul class="hlist">
<li><code><a title="baskerville.models.config.Config.to_dict" href="../util/helpers.html#baskerville.util.helpers.SerializableMixin.to_dict">to_dict</a></code></li>
</ul>
</li>
</ul>
</dd>
<dt id="baskerville.models.config.DatabaseConfig"><code class="flex name class">
<span>class <span class="ident">DatabaseConfig</span></span>
<span>(</span><span>config, parent=None)</span>
</code></dt>
<dd>
<section class="desc"><p>Baskerville's database configuration - Mandatory.</p></section>
<details class="source">
<summary>
<span>Expand source code</span>
</summary>
<pre><code class="python">class DatabaseConfig(Config):
    &#34;&#34;&#34;
    Baskerville&#39;s database configuration - Mandatory.
    &#34;&#34;&#34;
    name = None
    user = None
    password = None
    host = &#39;&#39;
    port = None
    type = &#39;postgres&#39;
    maintenance = None

    def __init__(self, config, parent=None):
        super(DatabaseConfig, self).__init__(config, parent)
        if self.maintenance:
            self.maintenance = MaintenanceConfig(
                self.maintenance
            )

    def validate(self):
        logger.debug(&#39;Validating DatabaseConfig...&#39;)
        if not self.host:
            self.add_error(ConfigError(
                &#39;Database host is empty.&#39;,
                [&#39;host&#39;],
            ))
            # raise ValueError(&#39;Database host is empty.&#39;)
        if not self.name:
            self.add_error(ConfigError(
                &#39;Database name is empty.&#39;,
                [&#39;name&#39;],
            ))
            # raise ValueError(&#39;Database name is empty.&#39;)
        if not self.port:
            warnings.warn(&#39;Database port is empty. &#39;
                          &#39;The driver will be using the default value&#39;)
        if self.type not in (&#39;mysql&#39;, &#39;postgres&#39;):
            self.add_error(ConfigError(
                &#39;Not implemented database connection for &#39;
                &#39;{} type&#39;.format(self.type),
                [&#39;type&#39;],
                exception_type=NotImplementedError
            ))

            # raise NotImplementedError(
            #     &#39;Not implemented database connection for &#39;
            #     &#39;{} type&#39;.format(self.type)
            # )

        if self.maintenance:
            self.maintenance = self.maintenance.validate()

        self._is_validated = True
        return self</code></pre>
</details>
<h3>Ancestors</h3>
<ul class="hlist">
<li><a title="baskerville.models.config.Config" href="#baskerville.models.config.Config">Config</a></li>
<li><a title="baskerville.util.helpers.SerializableMixin" href="../util/helpers.html#baskerville.util.helpers.SerializableMixin">SerializableMixin</a></li>
</ul>
<h3>Class variables</h3>
<dl>
<dt id="baskerville.models.config.DatabaseConfig.host"><code class="name">var <span class="ident">host</span></code></dt>
<dd>
<section class="desc"><p>str(object='') -&gt; str
str(bytes_or_buffer[, encoding[, errors]]) -&gt; str</p>
<p>Create a new string object from the given object. If encoding or
errors is specified, then the object must expose a data buffer
that will be decoded using the given encoding and error handler.
Otherwise, returns the result of object.<strong>str</strong>() (if defined)
or repr(object).
encoding defaults to sys.getdefaultencoding().
errors defaults to 'strict'.</p></section>
</dd>
<dt id="baskerville.models.config.DatabaseConfig.maintenance"><code class="name">var <span class="ident">maintenance</span></code></dt>
<dd>
<section class="desc"></section>
</dd>
<dt id="baskerville.models.config.DatabaseConfig.name"><code class="name">var <span class="ident">name</span></code></dt>
<dd>
<section class="desc"></section>
</dd>
<dt id="baskerville.models.config.DatabaseConfig.password"><code class="name">var <span class="ident">password</span></code></dt>
<dd>
<section class="desc"></section>
</dd>
<dt id="baskerville.models.config.DatabaseConfig.port"><code class="name">var <span class="ident">port</span></code></dt>
<dd>
<section class="desc"></section>
</dd>
<dt id="baskerville.models.config.DatabaseConfig.type"><code class="name">var <span class="ident">type</span></code></dt>
<dd>
<section class="desc"><p>str(object='') -&gt; str
str(bytes_or_buffer[, encoding[, errors]]) -&gt; str</p>
<p>Create a new string object from the given object. If encoding or
errors is specified, then the object must expose a data buffer
that will be decoded using the given encoding and error handler.
Otherwise, returns the result of object.<strong>str</strong>() (if defined)
or repr(object).
encoding defaults to sys.getdefaultencoding().
errors defaults to 'strict'.</p></section>
</dd>
<dt id="baskerville.models.config.DatabaseConfig.user"><code class="name">var <span class="ident">user</span></code></dt>
<dd>
<section class="desc"></section>
</dd>
</dl>
<h3>Methods</h3>
<dl>
<dt id="baskerville.models.config.DatabaseConfig.validate"><code class="name flex">
<span>def <span class="ident">validate</span></span>(<span>self)</span>
</code></dt>
<dd>
<section class="desc"></section>
<details class="source">
<summary>
<span>Expand source code</span>
</summary>
<pre><code class="python">def validate(self):
    logger.debug(&#39;Validating DatabaseConfig...&#39;)
    if not self.host:
        self.add_error(ConfigError(
            &#39;Database host is empty.&#39;,
            [&#39;host&#39;],
        ))
        # raise ValueError(&#39;Database host is empty.&#39;)
    if not self.name:
        self.add_error(ConfigError(
            &#39;Database name is empty.&#39;,
            [&#39;name&#39;],
        ))
        # raise ValueError(&#39;Database name is empty.&#39;)
    if not self.port:
        warnings.warn(&#39;Database port is empty. &#39;
                      &#39;The driver will be using the default value&#39;)
    if self.type not in (&#39;mysql&#39;, &#39;postgres&#39;):
        self.add_error(ConfigError(
            &#39;Not implemented database connection for &#39;
            &#39;{} type&#39;.format(self.type),
            [&#39;type&#39;],
            exception_type=NotImplementedError
        ))

        # raise NotImplementedError(
        #     &#39;Not implemented database connection for &#39;
        #     &#39;{} type&#39;.format(self.type)
        # )

    if self.maintenance:
        self.maintenance = self.maintenance.validate()

    self._is_validated = True
    return self</code></pre>
</details>
</dd>
</dl>
<h3>Inherited members</h3>
<ul class="hlist">
<li><code><b><a title="baskerville.models.config.Config" href="#baskerville.models.config.Config">Config</a></b></code>:
<ul class="hlist">
<li><code><a title="baskerville.models.config.Config.to_dict" href="../util/helpers.html#baskerville.util.helpers.SerializableMixin.to_dict">to_dict</a></code></li>
</ul>
</li>
</ul>
</dd>
<dt id="baskerville.models.config.ElasticConfig"><code class="flex name class">
<span>class <span class="ident">ElasticConfig</span></span>
<span>(</span><span>config)</span>
</code></dt>
<dd>
<section class="desc"><p>Configuration for ElasticSearch access.</p></section>
<details class="source">
<summary>
<span>Expand source code</span>
</summary>
<pre><code class="python">class ElasticConfig(Config):
    &#34;&#34;&#34;
    Configuration for ElasticSearch access.
    &#34;&#34;&#34;
    user = &#39;&#39;
    password = &#39;&#39;
    host = &#39;&#39;
    base_index = &#39;&#39;
    index_type = &#39;&#39;

    def __init__(self, config):
        super(ElasticConfig, self).__init__(config)

    def validate(self):
        logger.debug(&#39;Validating ElasticConfig...&#39;)
        if not self.host:
            warnings.warn(&#39;Elastic search host is empty. If you are not using&#39;
                          &#39; the Elasticsearch pipeline, ignore&#39;)

        self._is_validated = True
        return self</code></pre>
</details>
<h3>Ancestors</h3>
<ul class="hlist">
<li><a title="baskerville.models.config.Config" href="#baskerville.models.config.Config">Config</a></li>
<li><a title="baskerville.util.helpers.SerializableMixin" href="../util/helpers.html#baskerville.util.helpers.SerializableMixin">SerializableMixin</a></li>
</ul>
<h3>Class variables</h3>
<dl>
<dt id="baskerville.models.config.ElasticConfig.base_index"><code class="name">var <span class="ident">base_index</span></code></dt>
<dd>
<section class="desc"><p>str(object='') -&gt; str
str(bytes_or_buffer[, encoding[, errors]]) -&gt; str</p>
<p>Create a new string object from the given object. If encoding or
errors is specified, then the object must expose a data buffer
that will be decoded using the given encoding and error handler.
Otherwise, returns the result of object.<strong>str</strong>() (if defined)
or repr(object).
encoding defaults to sys.getdefaultencoding().
errors defaults to 'strict'.</p></section>
</dd>
<dt id="baskerville.models.config.ElasticConfig.host"><code class="name">var <span class="ident">host</span></code></dt>
<dd>
<section class="desc"><p>str(object='') -&gt; str
str(bytes_or_buffer[, encoding[, errors]]) -&gt; str</p>
<p>Create a new string object from the given object. If encoding or
errors is specified, then the object must expose a data buffer
that will be decoded using the given encoding and error handler.
Otherwise, returns the result of object.<strong>str</strong>() (if defined)
or repr(object).
encoding defaults to sys.getdefaultencoding().
errors defaults to 'strict'.</p></section>
</dd>
<dt id="baskerville.models.config.ElasticConfig.index_type"><code class="name">var <span class="ident">index_type</span></code></dt>
<dd>
<section class="desc"><p>str(object='') -&gt; str
str(bytes_or_buffer[, encoding[, errors]]) -&gt; str</p>
<p>Create a new string object from the given object. If encoding or
errors is specified, then the object must expose a data buffer
that will be decoded using the given encoding and error handler.
Otherwise, returns the result of object.<strong>str</strong>() (if defined)
or repr(object).
encoding defaults to sys.getdefaultencoding().
errors defaults to 'strict'.</p></section>
</dd>
<dt id="baskerville.models.config.ElasticConfig.password"><code class="name">var <span class="ident">password</span></code></dt>
<dd>
<section class="desc"><p>str(object='') -&gt; str
str(bytes_or_buffer[, encoding[, errors]]) -&gt; str</p>
<p>Create a new string object from the given object. If encoding or
errors is specified, then the object must expose a data buffer
that will be decoded using the given encoding and error handler.
Otherwise, returns the result of object.<strong>str</strong>() (if defined)
or repr(object).
encoding defaults to sys.getdefaultencoding().
errors defaults to 'strict'.</p></section>
</dd>
<dt id="baskerville.models.config.ElasticConfig.user"><code class="name">var <span class="ident">user</span></code></dt>
<dd>
<section class="desc"><p>str(object='') -&gt; str
str(bytes_or_buffer[, encoding[, errors]]) -&gt; str</p>
<p>Create a new string object from the given object. If encoding or
errors is specified, then the object must expose a data buffer
that will be decoded using the given encoding and error handler.
Otherwise, returns the result of object.<strong>str</strong>() (if defined)
or repr(object).
encoding defaults to sys.getdefaultencoding().
errors defaults to 'strict'.</p></section>
</dd>
</dl>
<h3>Methods</h3>
<dl>
<dt id="baskerville.models.config.ElasticConfig.validate"><code class="name flex">
<span>def <span class="ident">validate</span></span>(<span>self)</span>
</code></dt>
<dd>
<section class="desc"></section>
<details class="source">
<summary>
<span>Expand source code</span>
</summary>
<pre><code class="python">def validate(self):
    logger.debug(&#39;Validating ElasticConfig...&#39;)
    if not self.host:
        warnings.warn(&#39;Elastic search host is empty. If you are not using&#39;
                      &#39; the Elasticsearch pipeline, ignore&#39;)

    self._is_validated = True
    return self</code></pre>
</details>
</dd>
</dl>
<h3>Inherited members</h3>
<ul class="hlist">
<li><code><b><a title="baskerville.models.config.Config" href="#baskerville.models.config.Config">Config</a></b></code>:
<ul class="hlist">
<li><code><a title="baskerville.models.config.Config.to_dict" href="../util/helpers.html#baskerville.util.helpers.SerializableMixin.to_dict">to_dict</a></code></li>
</ul>
</li>
</ul>
</dd>
<dt id="baskerville.models.config.EngineConfig"><code class="flex name class">
<span>class <span class="ident">EngineConfig</span></span>
<span>(</span><span>config, parent=None)</span>
</code></dt>
<dd>
<section class="desc"><p>The pipeline's configuration</p></section>
<details class="source">
<summary>
<span>Expand source code</span>
</summary>
<pre><code class="python">class EngineConfig(Config):
    &#34;&#34;&#34;
    The pipeline&#39;s configuration
    &#34;&#34;&#34;
    manual_es = None
    manual_rawlog = None
    simulation = None
    datetime_format = &#39;%Y-%m-%d %H:%M:%S&#39;
    cache_expire_time = None
    cache_load_past = False
    cross_reference = False
    model_path = None
    model_version_id = None
    extra_features = None
    verbose = False
    metrics = None
    data_config = None
    logpath = &#39;baskerville.log&#39;
    log_level = None
    time_bucket = 120
    all_features = None
    load_test = False

    def __init__(self, config, parent=None):
        super(EngineConfig, self).__init__(config, parent)
        if self.manual_es:
            self.manual_es = ManualEsConfig(self.manual_es, self)
        if self.manual_rawlog:
            self.manual_rawlog = ManualRawlogConfig(self.manual_rawlog, self)
        if self.simulation:
            self.simulation = SimulationConfig(self.simulation, self)
        if self.metrics:
            self.metrics = MetricsConfig(self.metrics)
        if self.data_config:
            self.data_config = DataParsingConfig(self.data_config)
        self.all_features = dict(
            (f.feature_name_from_class(), f) for f in FEATURES
        )

    def validate(self):
        logger.debug(&#39;Validating EngineConfig...&#39;)
        if self.load_test:
            self.load_test = int(self.load_test)
        if not self.manual_es and not self.manual_rawlog:
            self.add_error(ConfigError(
                &#39;Either manual_es or manual_rawlog config must be provided&#39;,
                [&#39;manual_es&#39;, &#39;manual_rawlog&#39;],
            ))
            # raise RuntimeError(
            #     &#39;Either manual_es or manual_rawlog config must be provided&#39;
            # )
        if self.model_version_id and self.model_path:
            self.add_error(ConfigError(
                &#39;Model version id and model path cannot both be specified.&#39;,
                [&#39;model_version_id&#39;, &#39;model_path&#39;],
            ))
            # raise RuntimeError(&#39;Model version id and model path cannot &#39;
            #                    &#39;both be specified.&#39;)
        if not self.logpath:
            self.logpath = &#39;baskerville.log&#39;
            warnings.warn(&#39;Path for the log file is not set, &#39;
                          &#39;setting it to {}&#39;.format(self.logpath))
        if not self.log_level:
            self.log_level = &#39;ERROR&#39;
            warnings.warn(&#39;No log level provided, default value set: ERROR&#39;)
        if self.manual_es:
            self.manual_es.validate()
        if self.manual_rawlog:
            self.manual_rawlog.validate()
        if self.simulation:
            self.simulation.validate()
        if self.data_config:
            self.data_config.validate()
        if self.metrics:
            self.metrics.validate()
        if not self.time_bucket:
            self.time_bucket = 120
            warnings.warn(&#39;Time bucket is set to the default 120 seconds.&#39;)
        if not self.time_bucket == 120:
            warnings.warn(&#39;Time bucket is NOT set to the default 120 seconds.&#39;)
        self.time_bucket = int(self.time_bucket)
        if not self.cache_expire_time:
            self.cache_expire_time = 86400
            warnings.warn(
                &#39;Cache expire time is set to the default 86400 seconds (1 day)&#39;
            )
        self.cache_expire_time = int(self.cache_expire_time)
        for f in self.extra_features:
            if f not in self.all_features:
                self.add_error(
                    ConfigError(f&#39;Unknown feature {f}.&#39;, [&#39;extra_features&#39;])
                )

        self._is_validated = True
        return self</code></pre>
</details>
<h3>Ancestors</h3>
<ul class="hlist">
<li><a title="baskerville.models.config.Config" href="#baskerville.models.config.Config">Config</a></li>
<li><a title="baskerville.util.helpers.SerializableMixin" href="../util/helpers.html#baskerville.util.helpers.SerializableMixin">SerializableMixin</a></li>
</ul>
<h3>Class variables</h3>
<dl>
<dt id="baskerville.models.config.EngineConfig.all_features"><code class="name">var <span class="ident">all_features</span></code></dt>
<dd>
<section class="desc"></section>
</dd>
<dt id="baskerville.models.config.EngineConfig.cache_expire_time"><code class="name">var <span class="ident">cache_expire_time</span></code></dt>
<dd>
<section class="desc"></section>
</dd>
<dt id="baskerville.models.config.EngineConfig.cache_load_past"><code class="name">var <span class="ident">cache_load_past</span></code></dt>
<dd>
<section class="desc"><p>bool(x) -&gt; bool</p>
<p>Returns True when the argument x is true, False otherwise.
The builtins True and False are the only two instances of the class bool.
The class bool is a subclass of the class int, and cannot be subclassed.</p></section>
</dd>
<dt id="baskerville.models.config.EngineConfig.cross_reference"><code class="name">var <span class="ident">cross_reference</span></code></dt>
<dd>
<section class="desc"><p>bool(x) -&gt; bool</p>
<p>Returns True when the argument x is true, False otherwise.
The builtins True and False are the only two instances of the class bool.
The class bool is a subclass of the class int, and cannot be subclassed.</p></section>
</dd>
<dt id="baskerville.models.config.EngineConfig.data_config"><code class="name">var <span class="ident">data_config</span></code></dt>
<dd>
<section class="desc"></section>
</dd>
<dt id="baskerville.models.config.EngineConfig.datetime_format"><code class="name">var <span class="ident">datetime_format</span></code></dt>
<dd>
<section class="desc"><p>str(object='') -&gt; str
str(bytes_or_buffer[, encoding[, errors]]) -&gt; str</p>
<p>Create a new string object from the given object. If encoding or
errors is specified, then the object must expose a data buffer
that will be decoded using the given encoding and error handler.
Otherwise, returns the result of object.<strong>str</strong>() (if defined)
or repr(object).
encoding defaults to sys.getdefaultencoding().
errors defaults to 'strict'.</p></section>
</dd>
<dt id="baskerville.models.config.EngineConfig.extra_features"><code class="name">var <span class="ident">extra_features</span></code></dt>
<dd>
<section class="desc"></section>
</dd>
<dt id="baskerville.models.config.EngineConfig.load_test"><code class="name">var <span class="ident">load_test</span></code></dt>
<dd>
<section class="desc"><p>bool(x) -&gt; bool</p>
<p>Returns True when the argument x is true, False otherwise.
The builtins True and False are the only two instances of the class bool.
The class bool is a subclass of the class int, and cannot be subclassed.</p></section>
</dd>
<dt id="baskerville.models.config.EngineConfig.log_level"><code class="name">var <span class="ident">log_level</span></code></dt>
<dd>
<section class="desc"></section>
</dd>
<dt id="baskerville.models.config.EngineConfig.logpath"><code class="name">var <span class="ident">logpath</span></code></dt>
<dd>
<section class="desc"><p>str(object='') -&gt; str
str(bytes_or_buffer[, encoding[, errors]]) -&gt; str</p>
<p>Create a new string object from the given object. If encoding or
errors is specified, then the object must expose a data buffer
that will be decoded using the given encoding and error handler.
Otherwise, returns the result of object.<strong>str</strong>() (if defined)
or repr(object).
encoding defaults to sys.getdefaultencoding().
errors defaults to 'strict'.</p></section>
</dd>
<dt id="baskerville.models.config.EngineConfig.manual_es"><code class="name">var <span class="ident">manual_es</span></code></dt>
<dd>
<section class="desc"></section>
</dd>
<dt id="baskerville.models.config.EngineConfig.manual_rawlog"><code class="name">var <span class="ident">manual_rawlog</span></code></dt>
<dd>
<section class="desc"></section>
</dd>
<dt id="baskerville.models.config.EngineConfig.metrics"><code class="name">var <span class="ident">metrics</span></code></dt>
<dd>
<section class="desc"></section>
</dd>
<dt id="baskerville.models.config.EngineConfig.model_path"><code class="name">var <span class="ident">model_path</span></code></dt>
<dd>
<section class="desc"></section>
</dd>
<dt id="baskerville.models.config.EngineConfig.model_version_id"><code class="name">var <span class="ident">model_version_id</span></code></dt>
<dd>
<section class="desc"></section>
</dd>
<dt id="baskerville.models.config.EngineConfig.simulation"><code class="name">var <span class="ident">simulation</span></code></dt>
<dd>
<section class="desc"></section>
</dd>
<dt id="baskerville.models.config.EngineConfig.time_bucket"><code class="name">var <span class="ident">time_bucket</span></code></dt>
<dd>
<section class="desc"><p>int(x=0) -&gt; integer
int(x, base=10) -&gt; integer</p>
<p>Convert a number or string to an integer, or return 0 if no arguments
are given.
If x is a number, return x.<strong>int</strong>().
For floating point
numbers, this truncates towards zero.</p>
<p>If x is not a number or if base is given, then x must be a string,
bytes, or bytearray instance representing an integer literal in the
given base.
The literal can be preceded by '+' or '-' and be surrounded
by whitespace.
The base defaults to 10.
Valid bases are 0 and 2-36.
Base 0 means to interpret the base from the string as an integer literal.</p>
<pre><code>&gt;&gt;&gt; int('0b100', base=0)
4
</code></pre></section>
</dd>
<dt id="baskerville.models.config.EngineConfig.verbose"><code class="name">var <span class="ident">verbose</span></code></dt>
<dd>
<section class="desc"><p>bool(x) -&gt; bool</p>
<p>Returns True when the argument x is true, False otherwise.
The builtins True and False are the only two instances of the class bool.
The class bool is a subclass of the class int, and cannot be subclassed.</p></section>
</dd>
</dl>
<h3>Methods</h3>
<dl>
<dt id="baskerville.models.config.EngineConfig.validate"><code class="name flex">
<span>def <span class="ident">validate</span></span>(<span>self)</span>
</code></dt>
<dd>
<section class="desc"></section>
<details class="source">
<summary>
<span>Expand source code</span>
</summary>
<pre><code class="python">def validate(self):
    logger.debug(&#39;Validating EngineConfig...&#39;)
    if self.load_test:
        self.load_test = int(self.load_test)
    if not self.manual_es and not self.manual_rawlog:
        self.add_error(ConfigError(
            &#39;Either manual_es or manual_rawlog config must be provided&#39;,
            [&#39;manual_es&#39;, &#39;manual_rawlog&#39;],
        ))
        # raise RuntimeError(
        #     &#39;Either manual_es or manual_rawlog config must be provided&#39;
        # )
    if self.model_version_id and self.model_path:
        self.add_error(ConfigError(
            &#39;Model version id and model path cannot both be specified.&#39;,
            [&#39;model_version_id&#39;, &#39;model_path&#39;],
        ))
        # raise RuntimeError(&#39;Model version id and model path cannot &#39;
        #                    &#39;both be specified.&#39;)
    if not self.logpath:
        self.logpath = &#39;baskerville.log&#39;
        warnings.warn(&#39;Path for the log file is not set, &#39;
                      &#39;setting it to {}&#39;.format(self.logpath))
    if not self.log_level:
        self.log_level = &#39;ERROR&#39;
        warnings.warn(&#39;No log level provided, default value set: ERROR&#39;)
    if self.manual_es:
        self.manual_es.validate()
    if self.manual_rawlog:
        self.manual_rawlog.validate()
    if self.simulation:
        self.simulation.validate()
    if self.data_config:
        self.data_config.validate()
    if self.metrics:
        self.metrics.validate()
    if not self.time_bucket:
        self.time_bucket = 120
        warnings.warn(&#39;Time bucket is set to the default 120 seconds.&#39;)
    if not self.time_bucket == 120:
        warnings.warn(&#39;Time bucket is NOT set to the default 120 seconds.&#39;)
    self.time_bucket = int(self.time_bucket)
    if not self.cache_expire_time:
        self.cache_expire_time = 86400
        warnings.warn(
            &#39;Cache expire time is set to the default 86400 seconds (1 day)&#39;
        )
    self.cache_expire_time = int(self.cache_expire_time)
    for f in self.extra_features:
        if f not in self.all_features:
            self.add_error(
                ConfigError(f&#39;Unknown feature {f}.&#39;, [&#39;extra_features&#39;])
            )

    self._is_validated = True
    return self</code></pre>
</details>
</dd>
</dl>
<h3>Inherited members</h3>
<ul class="hlist">
<li><code><b><a title="baskerville.models.config.Config" href="#baskerville.models.config.Config">Config</a></b></code>:
<ul class="hlist">
<li><code><a title="baskerville.models.config.Config.to_dict" href="../util/helpers.html#baskerville.util.helpers.SerializableMixin.to_dict">to_dict</a></code></li>
</ul>
</li>
</ul>
</dd>
<dt id="baskerville.models.config.KafkaConfig"><code class="flex name class">
<span>class <span class="ident">KafkaConfig</span></span>
<span>(</span><span>config)</span>
</code></dt>
<dd>
<section class="desc"><p>Configuration for access to a Kafka instance for the kafka pipeline.</p></section>
<details class="source">
<summary>
<span>Expand source code</span>
</summary>
<pre><code class="python">class KafkaConfig(Config):
    &#34;&#34;&#34;
    Configuration for access to a Kafka instance for the kafka pipeline.
    &#34;&#34;&#34;
    url = &#39;0.0.0.0:9092&#39;
    zookeeper = &#39;localhost:2181&#39;
    consume_topic = &#39;deflect.logs&#39;
    publish_logs = &#39;baskerville.logs&#39;
    publish_stats = &#39;baskerville.stats&#39;
    publish_predictions = &#39;baskerville.predictions&#39;
    ssl_truststore_password = &#39;&#39;
    ssl_truststore_location = &#39;&#39;

    def __init__(self, config):
        super(KafkaConfig, self).__init__(config)

    def validate(self):
        logger.debug(&#39;Validating KafkaConfig...&#39;)
        if not self.url:
            self.add_error(ConfigError(
                &#39;Kafka url is empty.&#39;,
                [&#39;url&#39;],
            ))
            # raise ValueError(&#39;Kafka url is empty.&#39;)
        if not self.zookeeper:
            # kafka client can be used without zookeeper
            warnings.warn(&#39;Zookeeper url is empty.&#39;)
        if not self.consume_topic:
            warnings.warn(&#39;Consume topic is empty. If you are not using &#39;
                          &#39;simulation or Realtime pipeline ignore this&#39;)
        if not self.publish_logs:
            warnings.warn(&#39;Publish logs is empty. If you are not using &#39;
                          &#39;simulation or Realtime pipeline ignore this&#39;)
        if not self.publish_stats:
            warnings.warn(&#39;Publish stats topic is empty. If you are not using &#39;
                          &#39;simulation or Realtime pipeline ignore this&#39;)
        if not self.publish_predictions:
            warnings.warn(
                &#39;Publish predictions topic is empty. If you are not using &#39;
                &#39;simulation or Realtime pipeline ignore this&#39;)

        self._is_validated = True
        return self</code></pre>
</details>
<h3>Ancestors</h3>
<ul class="hlist">
<li><a title="baskerville.models.config.Config" href="#baskerville.models.config.Config">Config</a></li>
<li><a title="baskerville.util.helpers.SerializableMixin" href="../util/helpers.html#baskerville.util.helpers.SerializableMixin">SerializableMixin</a></li>
</ul>
<h3>Class variables</h3>
<dl>
<dt id="baskerville.models.config.KafkaConfig.consume_topic"><code class="name">var <span class="ident">consume_topic</span></code></dt>
<dd>
<section class="desc"><p>str(object='') -&gt; str
str(bytes_or_buffer[, encoding[, errors]]) -&gt; str</p>
<p>Create a new string object from the given object. If encoding or
errors is specified, then the object must expose a data buffer
that will be decoded using the given encoding and error handler.
Otherwise, returns the result of object.<strong>str</strong>() (if defined)
or repr(object).
encoding defaults to sys.getdefaultencoding().
errors defaults to 'strict'.</p></section>
</dd>
<dt id="baskerville.models.config.KafkaConfig.publish_logs"><code class="name">var <span class="ident">publish_logs</span></code></dt>
<dd>
<section class="desc"><p>str(object='') -&gt; str
str(bytes_or_buffer[, encoding[, errors]]) -&gt; str</p>
<p>Create a new string object from the given object. If encoding or
errors is specified, then the object must expose a data buffer
that will be decoded using the given encoding and error handler.
Otherwise, returns the result of object.<strong>str</strong>() (if defined)
or repr(object).
encoding defaults to sys.getdefaultencoding().
errors defaults to 'strict'.</p></section>
</dd>
<dt id="baskerville.models.config.KafkaConfig.publish_predictions"><code class="name">var <span class="ident">publish_predictions</span></code></dt>
<dd>
<section class="desc"><p>str(object='') -&gt; str
str(bytes_or_buffer[, encoding[, errors]]) -&gt; str</p>
<p>Create a new string object from the given object. If encoding or
errors is specified, then the object must expose a data buffer
that will be decoded using the given encoding and error handler.
Otherwise, returns the result of object.<strong>str</strong>() (if defined)
or repr(object).
encoding defaults to sys.getdefaultencoding().
errors defaults to 'strict'.</p></section>
</dd>
<dt id="baskerville.models.config.KafkaConfig.publish_stats"><code class="name">var <span class="ident">publish_stats</span></code></dt>
<dd>
<section class="desc"><p>str(object='') -&gt; str
str(bytes_or_buffer[, encoding[, errors]]) -&gt; str</p>
<p>Create a new string object from the given object. If encoding or
errors is specified, then the object must expose a data buffer
that will be decoded using the given encoding and error handler.
Otherwise, returns the result of object.<strong>str</strong>() (if defined)
or repr(object).
encoding defaults to sys.getdefaultencoding().
errors defaults to 'strict'.</p></section>
</dd>
<dt id="baskerville.models.config.KafkaConfig.ssl_truststore_location"><code class="name">var <span class="ident">ssl_truststore_location</span></code></dt>
<dd>
<section class="desc"><p>str(object='') -&gt; str
str(bytes_or_buffer[, encoding[, errors]]) -&gt; str</p>
<p>Create a new string object from the given object. If encoding or
errors is specified, then the object must expose a data buffer
that will be decoded using the given encoding and error handler.
Otherwise, returns the result of object.<strong>str</strong>() (if defined)
or repr(object).
encoding defaults to sys.getdefaultencoding().
errors defaults to 'strict'.</p></section>
</dd>
<dt id="baskerville.models.config.KafkaConfig.ssl_truststore_password"><code class="name">var <span class="ident">ssl_truststore_password</span></code></dt>
<dd>
<section class="desc"><p>str(object='') -&gt; str
str(bytes_or_buffer[, encoding[, errors]]) -&gt; str</p>
<p>Create a new string object from the given object. If encoding or
errors is specified, then the object must expose a data buffer
that will be decoded using the given encoding and error handler.
Otherwise, returns the result of object.<strong>str</strong>() (if defined)
or repr(object).
encoding defaults to sys.getdefaultencoding().
errors defaults to 'strict'.</p></section>
</dd>
<dt id="baskerville.models.config.KafkaConfig.url"><code class="name">var <span class="ident">url</span></code></dt>
<dd>
<section class="desc"><p>str(object='') -&gt; str
str(bytes_or_buffer[, encoding[, errors]]) -&gt; str</p>
<p>Create a new string object from the given object. If encoding or
errors is specified, then the object must expose a data buffer
that will be decoded using the given encoding and error handler.
Otherwise, returns the result of object.<strong>str</strong>() (if defined)
or repr(object).
encoding defaults to sys.getdefaultencoding().
errors defaults to 'strict'.</p></section>
</dd>
<dt id="baskerville.models.config.KafkaConfig.zookeeper"><code class="name">var <span class="ident">zookeeper</span></code></dt>
<dd>
<section class="desc"><p>str(object='') -&gt; str
str(bytes_or_buffer[, encoding[, errors]]) -&gt; str</p>
<p>Create a new string object from the given object. If encoding or
errors is specified, then the object must expose a data buffer
that will be decoded using the given encoding and error handler.
Otherwise, returns the result of object.<strong>str</strong>() (if defined)
or repr(object).
encoding defaults to sys.getdefaultencoding().
errors defaults to 'strict'.</p></section>
</dd>
</dl>
<h3>Methods</h3>
<dl>
<dt id="baskerville.models.config.KafkaConfig.validate"><code class="name flex">
<span>def <span class="ident">validate</span></span>(<span>self)</span>
</code></dt>
<dd>
<section class="desc"></section>
<details class="source">
<summary>
<span>Expand source code</span>
</summary>
<pre><code class="python">def validate(self):
    logger.debug(&#39;Validating KafkaConfig...&#39;)
    if not self.url:
        self.add_error(ConfigError(
            &#39;Kafka url is empty.&#39;,
            [&#39;url&#39;],
        ))
        # raise ValueError(&#39;Kafka url is empty.&#39;)
    if not self.zookeeper:
        # kafka client can be used without zookeeper
        warnings.warn(&#39;Zookeeper url is empty.&#39;)
    if not self.consume_topic:
        warnings.warn(&#39;Consume topic is empty. If you are not using &#39;
                      &#39;simulation or Realtime pipeline ignore this&#39;)
    if not self.publish_logs:
        warnings.warn(&#39;Publish logs is empty. If you are not using &#39;
                      &#39;simulation or Realtime pipeline ignore this&#39;)
    if not self.publish_stats:
        warnings.warn(&#39;Publish stats topic is empty. If you are not using &#39;
                      &#39;simulation or Realtime pipeline ignore this&#39;)
    if not self.publish_predictions:
        warnings.warn(
            &#39;Publish predictions topic is empty. If you are not using &#39;
            &#39;simulation or Realtime pipeline ignore this&#39;)

    self._is_validated = True
    return self</code></pre>
</details>
</dd>
</dl>
<h3>Inherited members</h3>
<ul class="hlist">
<li><code><b><a title="baskerville.models.config.Config" href="#baskerville.models.config.Config">Config</a></b></code>:
<ul class="hlist">
<li><code><a title="baskerville.models.config.Config.to_dict" href="../util/helpers.html#baskerville.util.helpers.SerializableMixin.to_dict">to_dict</a></code></li>
</ul>
</li>
</ul>
</dd>
<dt id="baskerville.models.config.MaintenanceConfig"><code class="flex name class">
<span>class <span class="ident">MaintenanceConfig</span></span>
<span>(</span><span>config, parent=None)</span>
</code></dt>
<dd>
<section class="desc"><p>Configuration for the database maintenance processes, like data
partitioning and data archiving. Optional</p></section>
<details class="source">
<summary>
<span>Expand source code</span>
</summary>
<pre><code class="python">class MaintenanceConfig(Config):
    &#34;&#34;&#34;
    Configuration for the database maintenance processes, like data
    partitioning and data archiving. Optional
    &#34;&#34;&#34;
    template_folder = get_default_data_path()
    partition_table = &#39;request_sets&#39;
    partition_field = &#39;created_at&#39;
    partition_by = &#39;week&#39;
    data_partition = None
    data_archive = None
    keep_data_for = &#39;1 year&#39;

    def __init__(self, config, parent=None):
        super().__init__(config, parent)
        if self.data_partition:
            self.data_partition = DataPartitionConfig(
                self.data_partition
            )
        if self.data_archive:
            self.data_archive = DataArchiveConfig(
                self.data_archive
            )

    def validate(self):
        logger.debug(&#39;Validating MaintenanceConfig...&#39;)
        if self.keep_data_for:
            split_kdf = self.keep_data_for.split(&#39; &#39;)
            if not len(split_kdf) == 2:
                raise ValueError(
                    f&#39;Wrong value for \&#39;keep_data_for\&#39;:{self.keep_data_for}&#39;
                )
            num = int(split_kdf[0])
            unit = split_kdf[1]

            if unit not in [&#39;year&#39;, &#39;years&#39;, &#39;month&#39;, &#39;months&#39;, &#39;week&#39;,
                            &#39;weeks&#39;]:
                raise ValueError(
                    f&#39;Wrong unit for \&#39;keep_data_for\&#39;:{unit}&#39;
                )

            if &#39;year&#39; in unit:
                pass

        if self.partition_by not in [&#39;week&#39;, &#39;month&#39;]:
            raise ValueError(
                f&#39;{self.__class__.__name__}: invalid option &#39;
                f&#39;for partition_by {self.partition_by}&#39;
            )
        if self.data_partition:
            self.data_partition = self.data_partition.validate()
        if self.data_archive:
            self.data_archive = self.data_archive.validate()

        if (self.data_partition or self.data_archive) and \
                not os.path.isdir(self.template_folder):
            self.add_error(ConfigError(
                f&#39;Template folder not properly set: {self.template_folder}&#39;,
                [&#39;template_folder&#39;],
            ))
            # raise ValueError(
            #     f&#39;Template folder not properly set: {self.template_folder}&#39;
            # )
        self._is_validated = True
        return self</code></pre>
</details>
<h3>Ancestors</h3>
<ul class="hlist">
<li><a title="baskerville.models.config.Config" href="#baskerville.models.config.Config">Config</a></li>
<li><a title="baskerville.util.helpers.SerializableMixin" href="../util/helpers.html#baskerville.util.helpers.SerializableMixin">SerializableMixin</a></li>
</ul>
<h3>Class variables</h3>
<dl>
<dt id="baskerville.models.config.MaintenanceConfig.data_archive"><code class="name">var <span class="ident">data_archive</span></code></dt>
<dd>
<section class="desc"></section>
</dd>
<dt id="baskerville.models.config.MaintenanceConfig.data_partition"><code class="name">var <span class="ident">data_partition</span></code></dt>
<dd>
<section class="desc"></section>
</dd>
<dt id="baskerville.models.config.MaintenanceConfig.keep_data_for"><code class="name">var <span class="ident">keep_data_for</span></code></dt>
<dd>
<section class="desc"><p>str(object='') -&gt; str
str(bytes_or_buffer[, encoding[, errors]]) -&gt; str</p>
<p>Create a new string object from the given object. If encoding or
errors is specified, then the object must expose a data buffer
that will be decoded using the given encoding and error handler.
Otherwise, returns the result of object.<strong>str</strong>() (if defined)
or repr(object).
encoding defaults to sys.getdefaultencoding().
errors defaults to 'strict'.</p></section>
</dd>
<dt id="baskerville.models.config.MaintenanceConfig.partition_by"><code class="name">var <span class="ident">partition_by</span></code></dt>
<dd>
<section class="desc"><p>str(object='') -&gt; str
str(bytes_or_buffer[, encoding[, errors]]) -&gt; str</p>
<p>Create a new string object from the given object. If encoding or
errors is specified, then the object must expose a data buffer
that will be decoded using the given encoding and error handler.
Otherwise, returns the result of object.<strong>str</strong>() (if defined)
or repr(object).
encoding defaults to sys.getdefaultencoding().
errors defaults to 'strict'.</p></section>
</dd>
<dt id="baskerville.models.config.MaintenanceConfig.partition_field"><code class="name">var <span class="ident">partition_field</span></code></dt>
<dd>
<section class="desc"><p>str(object='') -&gt; str
str(bytes_or_buffer[, encoding[, errors]]) -&gt; str</p>
<p>Create a new string object from the given object. If encoding or
errors is specified, then the object must expose a data buffer
that will be decoded using the given encoding and error handler.
Otherwise, returns the result of object.<strong>str</strong>() (if defined)
or repr(object).
encoding defaults to sys.getdefaultencoding().
errors defaults to 'strict'.</p></section>
</dd>
<dt id="baskerville.models.config.MaintenanceConfig.partition_table"><code class="name">var <span class="ident">partition_table</span></code></dt>
<dd>
<section class="desc"><p>str(object='') -&gt; str
str(bytes_or_buffer[, encoding[, errors]]) -&gt; str</p>
<p>Create a new string object from the given object. If encoding or
errors is specified, then the object must expose a data buffer
that will be decoded using the given encoding and error handler.
Otherwise, returns the result of object.<strong>str</strong>() (if defined)
or repr(object).
encoding defaults to sys.getdefaultencoding().
errors defaults to 'strict'.</p></section>
</dd>
<dt id="baskerville.models.config.MaintenanceConfig.template_folder"><code class="name">var <span class="ident">template_folder</span></code></dt>
<dd>
<section class="desc"><p>str(object='') -&gt; str
str(bytes_or_buffer[, encoding[, errors]]) -&gt; str</p>
<p>Create a new string object from the given object. If encoding or
errors is specified, then the object must expose a data buffer
that will be decoded using the given encoding and error handler.
Otherwise, returns the result of object.<strong>str</strong>() (if defined)
or repr(object).
encoding defaults to sys.getdefaultencoding().
errors defaults to 'strict'.</p></section>
</dd>
</dl>
<h3>Methods</h3>
<dl>
<dt id="baskerville.models.config.MaintenanceConfig.validate"><code class="name flex">
<span>def <span class="ident">validate</span></span>(<span>self)</span>
</code></dt>
<dd>
<section class="desc"></section>
<details class="source">
<summary>
<span>Expand source code</span>
</summary>
<pre><code class="python">def validate(self):
    logger.debug(&#39;Validating MaintenanceConfig...&#39;)
    if self.keep_data_for:
        split_kdf = self.keep_data_for.split(&#39; &#39;)
        if not len(split_kdf) == 2:
            raise ValueError(
                f&#39;Wrong value for \&#39;keep_data_for\&#39;:{self.keep_data_for}&#39;
            )
        num = int(split_kdf[0])
        unit = split_kdf[1]

        if unit not in [&#39;year&#39;, &#39;years&#39;, &#39;month&#39;, &#39;months&#39;, &#39;week&#39;,
                        &#39;weeks&#39;]:
            raise ValueError(
                f&#39;Wrong unit for \&#39;keep_data_for\&#39;:{unit}&#39;
            )

        if &#39;year&#39; in unit:
            pass

    if self.partition_by not in [&#39;week&#39;, &#39;month&#39;]:
        raise ValueError(
            f&#39;{self.__class__.__name__}: invalid option &#39;
            f&#39;for partition_by {self.partition_by}&#39;
        )
    if self.data_partition:
        self.data_partition = self.data_partition.validate()
    if self.data_archive:
        self.data_archive = self.data_archive.validate()

    if (self.data_partition or self.data_archive) and \
            not os.path.isdir(self.template_folder):
        self.add_error(ConfigError(
            f&#39;Template folder not properly set: {self.template_folder}&#39;,
            [&#39;template_folder&#39;],
        ))
        # raise ValueError(
        #     f&#39;Template folder not properly set: {self.template_folder}&#39;
        # )
    self._is_validated = True
    return self</code></pre>
</details>
</dd>
</dl>
<h3>Inherited members</h3>
<ul class="hlist">
<li><code><b><a title="baskerville.models.config.Config" href="#baskerville.models.config.Config">Config</a></b></code>:
<ul class="hlist">
<li><code><a title="baskerville.models.config.Config.to_dict" href="../util/helpers.html#baskerville.util.helpers.SerializableMixin.to_dict">to_dict</a></code></li>
</ul>
</li>
</ul>
</dd>
<dt id="baskerville.models.config.ManualEsConfig"><code class="flex name class">
<span>class <span class="ident">ManualEsConfig</span></span>
<span>(</span><span>config, parent=None)</span>
</code></dt>
<dd>
<section class="desc"><p>The base Config class</p></section>
<details class="source">
<summary>
<span>Expand source code</span>
</summary>
<pre><code class="python">class ManualEsConfig(Config):
    hosts = None
    start = None
    stop = None
    batch_length = None
    save_logs_dir = None

    def __init__(self, config, parent=None):
        super(ManualEsConfig, self).__init__(config, parent)

    def validate(self):
        logger.debug(&#39;Validating EsConfig...&#39;)

        if not self.hosts:
            self.hosts = None
        if self.start:
            try:
                self.start = datetime.strptime(
                    self.start, self.parent.datetime_format
                ).replace(tzinfo=tzutc())
            except ValueError as e:
                self.add_error(ConfigError(e.args[0], &#39;start&#39;))

        if self.stop:
            try:
                self.stop = datetime.strptime(
                    self.stop, self.parent.datetime_format
                ).replace(tzinfo=tzutc())
            except ValueError as e:
                self.add_error(ConfigError(e.args[0], &#39;stop&#39;))
        if self.batch_length:
            self.batch_length = float(self.batch_length)
        elif self.start and self.stop:
            self.batch_length = (self.stop - self.start).total_seconds() / 60.
        else:
            self.add_error(ConfigError(
                &#39;Neither batch length nor stop point specified.&#39;,
                [&#39;batch_length&#39;, &#39;stop&#39;],
            ))
            # raise ValueError(&#39;Neither batch length nor stop point specified.&#39;)
        if self.save_logs_dir:
            if not os.path.isdir(
                    &#39;/&#39;.join(self.save_logs_dir.rsplit(&#39;/&#39;)[:-1])):
                self.add_error(ConfigError(
                    &#39;Path for save_logs_dir does not exist.&#39;,
                    [&#39;save_logs_dir&#39;],
                ))
                # raise ValueError(&#39;Path for save_logs_dir does not exist.&#39;)

        self._is_validated = True
        return self</code></pre>
</details>
<h3>Ancestors</h3>
<ul class="hlist">
<li><a title="baskerville.models.config.Config" href="#baskerville.models.config.Config">Config</a></li>
<li><a title="baskerville.util.helpers.SerializableMixin" href="../util/helpers.html#baskerville.util.helpers.SerializableMixin">SerializableMixin</a></li>
</ul>
<h3>Class variables</h3>
<dl>
<dt id="baskerville.models.config.ManualEsConfig.batch_length"><code class="name">var <span class="ident">batch_length</span></code></dt>
<dd>
<section class="desc"></section>
</dd>
<dt id="baskerville.models.config.ManualEsConfig.hosts"><code class="name">var <span class="ident">hosts</span></code></dt>
<dd>
<section class="desc"></section>
</dd>
<dt id="baskerville.models.config.ManualEsConfig.save_logs_dir"><code class="name">var <span class="ident">save_logs_dir</span></code></dt>
<dd>
<section class="desc"></section>
</dd>
<dt id="baskerville.models.config.ManualEsConfig.start"><code class="name">var <span class="ident">start</span></code></dt>
<dd>
<section class="desc"></section>
</dd>
<dt id="baskerville.models.config.ManualEsConfig.stop"><code class="name">var <span class="ident">stop</span></code></dt>
<dd>
<section class="desc"></section>
</dd>
</dl>
<h3>Methods</h3>
<dl>
<dt id="baskerville.models.config.ManualEsConfig.validate"><code class="name flex">
<span>def <span class="ident">validate</span></span>(<span>self)</span>
</code></dt>
<dd>
<section class="desc"></section>
<details class="source">
<summary>
<span>Expand source code</span>
</summary>
<pre><code class="python">def validate(self):
    logger.debug(&#39;Validating EsConfig...&#39;)

    if not self.hosts:
        self.hosts = None
    if self.start:
        try:
            self.start = datetime.strptime(
                self.start, self.parent.datetime_format
            ).replace(tzinfo=tzutc())
        except ValueError as e:
            self.add_error(ConfigError(e.args[0], &#39;start&#39;))

    if self.stop:
        try:
            self.stop = datetime.strptime(
                self.stop, self.parent.datetime_format
            ).replace(tzinfo=tzutc())
        except ValueError as e:
            self.add_error(ConfigError(e.args[0], &#39;stop&#39;))
    if self.batch_length:
        self.batch_length = float(self.batch_length)
    elif self.start and self.stop:
        self.batch_length = (self.stop - self.start).total_seconds() / 60.
    else:
        self.add_error(ConfigError(
            &#39;Neither batch length nor stop point specified.&#39;,
            [&#39;batch_length&#39;, &#39;stop&#39;],
        ))
        # raise ValueError(&#39;Neither batch length nor stop point specified.&#39;)
    if self.save_logs_dir:
        if not os.path.isdir(
                &#39;/&#39;.join(self.save_logs_dir.rsplit(&#39;/&#39;)[:-1])):
            self.add_error(ConfigError(
                &#39;Path for save_logs_dir does not exist.&#39;,
                [&#39;save_logs_dir&#39;],
            ))
            # raise ValueError(&#39;Path for save_logs_dir does not exist.&#39;)

    self._is_validated = True
    return self</code></pre>
</details>
</dd>
</dl>
<h3>Inherited members</h3>
<ul class="hlist">
<li><code><b><a title="baskerville.models.config.Config" href="#baskerville.models.config.Config">Config</a></b></code>:
<ul class="hlist">
<li><code><a title="baskerville.models.config.Config.to_dict" href="../util/helpers.html#baskerville.util.helpers.SerializableMixin.to_dict">to_dict</a></code></li>
</ul>
</li>
</ul>
</dd>
<dt id="baskerville.models.config.ManualRawlogConfig"><code class="flex name class">
<span>class <span class="ident">ManualRawlogConfig</span></span>
<span>(</span><span>config, parent=None)</span>
</code></dt>
<dd>
<section class="desc"><p>The base Config class</p></section>
<details class="source">
<summary>
<span>Expand source code</span>
</summary>
<pre><code class="python">class ManualRawlogConfig(Config):
    raw_logs_paths = None

    def __init__(self, config, parent=None):
        super(ManualRawlogConfig, self).__init__(config, parent)

    def validate(self):
        logger.debug(&#39;Validating RawlogConfig...&#39;)
        if self.raw_logs_paths:
            for log in self.raw_logs_paths:
                # allow * for spark
                if not os.path.isfile(log) and &#39;*&#39; not in log:
                    self.add_error(ConfigError(
                        f&#39;File {log} does not exist.&#39;,
                        [&#39;raw_logs_paths&#39;],
                    ))
                    # raise ValueError(f&#39;File {log} does not exist.&#39;)
        else:
            self.raw_logs_paths = []

        self._is_validated = True
        return self</code></pre>
</details>
<h3>Ancestors</h3>
<ul class="hlist">
<li><a title="baskerville.models.config.Config" href="#baskerville.models.config.Config">Config</a></li>
<li><a title="baskerville.util.helpers.SerializableMixin" href="../util/helpers.html#baskerville.util.helpers.SerializableMixin">SerializableMixin</a></li>
</ul>
<h3>Class variables</h3>
<dl>
<dt id="baskerville.models.config.ManualRawlogConfig.raw_logs_paths"><code class="name">var <span class="ident">raw_logs_paths</span></code></dt>
<dd>
<section class="desc"></section>
</dd>
</dl>
<h3>Methods</h3>
<dl>
<dt id="baskerville.models.config.ManualRawlogConfig.validate"><code class="name flex">
<span>def <span class="ident">validate</span></span>(<span>self)</span>
</code></dt>
<dd>
<section class="desc"></section>
<details class="source">
<summary>
<span>Expand source code</span>
</summary>
<pre><code class="python">def validate(self):
    logger.debug(&#39;Validating RawlogConfig...&#39;)
    if self.raw_logs_paths:
        for log in self.raw_logs_paths:
            # allow * for spark
            if not os.path.isfile(log) and &#39;*&#39; not in log:
                self.add_error(ConfigError(
                    f&#39;File {log} does not exist.&#39;,
                    [&#39;raw_logs_paths&#39;],
                ))
                # raise ValueError(f&#39;File {log} does not exist.&#39;)
    else:
        self.raw_logs_paths = []

    self._is_validated = True
    return self</code></pre>
</details>
</dd>
</dl>
<h3>Inherited members</h3>
<ul class="hlist">
<li><code><b><a title="baskerville.models.config.Config" href="#baskerville.models.config.Config">Config</a></b></code>:
<ul class="hlist">
<li><code><a title="baskerville.models.config.Config.to_dict" href="../util/helpers.html#baskerville.util.helpers.SerializableMixin.to_dict">to_dict</a></code></li>
</ul>
</li>
</ul>
</dd>
<dt id="baskerville.models.config.MetricsConfig"><code class="flex name class">
<span>class <span class="ident">MetricsConfig</span></span>
<span>(</span><span>config_dict)</span>
</code></dt>
<dd>
<section class="desc"><p>The base Config class</p></section>
<details class="source">
<summary>
<span>Expand source code</span>
</summary>
<pre><code class="python">class MetricsConfig(Config):
    port = 8998
    performance = None
    progress = False
    flag = True

    def __init__(self, config_dict):
        super(MetricsConfig, self).__init__(config_dict)

    def validate(self):
        logger.debug(&#39;Validating MetricsConfig...&#39;)
        if not self.flag and (self.performance or self.progress):
            warnings.warn(
                &#39;Metrics configuration exists but no flag was set. &#39;
                &#39;If you want to run the metrics exporter, &#39;
                &#39;run baskerville with the &#34;-e&#34; flag.&#39;
            )
        if self.flag and not self.performance and not self.progress:
            raise ValueError(f&#39;Metrics configuration is missing.&#39;)

        if not self.port:
            self.port = 8998
            warnings.warn(f&#39;Metrics port is set to default {self.port}&#39;)
        if not isinstance(self.port, int):
            self.port = int(self.port)

        self._is_validated = True
        return self</code></pre>
</details>
<h3>Ancestors</h3>
<ul class="hlist">
<li><a title="baskerville.models.config.Config" href="#baskerville.models.config.Config">Config</a></li>
<li><a title="baskerville.util.helpers.SerializableMixin" href="../util/helpers.html#baskerville.util.helpers.SerializableMixin">SerializableMixin</a></li>
</ul>
<h3>Class variables</h3>
<dl>
<dt id="baskerville.models.config.MetricsConfig.flag"><code class="name">var <span class="ident">flag</span></code></dt>
<dd>
<section class="desc"><p>bool(x) -&gt; bool</p>
<p>Returns True when the argument x is true, False otherwise.
The builtins True and False are the only two instances of the class bool.
The class bool is a subclass of the class int, and cannot be subclassed.</p></section>
</dd>
<dt id="baskerville.models.config.MetricsConfig.performance"><code class="name">var <span class="ident">performance</span></code></dt>
<dd>
<section class="desc"></section>
</dd>
<dt id="baskerville.models.config.MetricsConfig.port"><code class="name">var <span class="ident">port</span></code></dt>
<dd>
<section class="desc"><p>int(x=0) -&gt; integer
int(x, base=10) -&gt; integer</p>
<p>Convert a number or string to an integer, or return 0 if no arguments
are given.
If x is a number, return x.<strong>int</strong>().
For floating point
numbers, this truncates towards zero.</p>
<p>If x is not a number or if base is given, then x must be a string,
bytes, or bytearray instance representing an integer literal in the
given base.
The literal can be preceded by '+' or '-' and be surrounded
by whitespace.
The base defaults to 10.
Valid bases are 0 and 2-36.
Base 0 means to interpret the base from the string as an integer literal.</p>
<pre><code>&gt;&gt;&gt; int('0b100', base=0)
4
</code></pre></section>
</dd>
<dt id="baskerville.models.config.MetricsConfig.progress"><code class="name">var <span class="ident">progress</span></code></dt>
<dd>
<section class="desc"><p>bool(x) -&gt; bool</p>
<p>Returns True when the argument x is true, False otherwise.
The builtins True and False are the only two instances of the class bool.
The class bool is a subclass of the class int, and cannot be subclassed.</p></section>
</dd>
</dl>
<h3>Methods</h3>
<dl>
<dt id="baskerville.models.config.MetricsConfig.validate"><code class="name flex">
<span>def <span class="ident">validate</span></span>(<span>self)</span>
</code></dt>
<dd>
<section class="desc"></section>
<details class="source">
<summary>
<span>Expand source code</span>
</summary>
<pre><code class="python">def validate(self):
    logger.debug(&#39;Validating MetricsConfig...&#39;)
    if not self.flag and (self.performance or self.progress):
        warnings.warn(
            &#39;Metrics configuration exists but no flag was set. &#39;
            &#39;If you want to run the metrics exporter, &#39;
            &#39;run baskerville with the &#34;-e&#34; flag.&#39;
        )
    if self.flag and not self.performance and not self.progress:
        raise ValueError(f&#39;Metrics configuration is missing.&#39;)

    if not self.port:
        self.port = 8998
        warnings.warn(f&#39;Metrics port is set to default {self.port}&#39;)
    if not isinstance(self.port, int):
        self.port = int(self.port)

    self._is_validated = True
    return self</code></pre>
</details>
</dd>
</dl>
<h3>Inherited members</h3>
<ul class="hlist">
<li><code><b><a title="baskerville.models.config.Config" href="#baskerville.models.config.Config">Config</a></b></code>:
<ul class="hlist">
<li><code><a title="baskerville.models.config.Config.to_dict" href="../util/helpers.html#baskerville.util.helpers.SerializableMixin.to_dict">to_dict</a></code></li>
</ul>
</li>
</ul>
</dd>
<dt id="baskerville.models.config.MispConfig"><code class="flex name class">
<span>class <span class="ident">MispConfig</span></span>
<span>(</span><span>config)</span>
</code></dt>
<dd>
<section class="desc"><p>Configuration for access to a MISP instance</p></section>
<details class="source">
<summary>
<span>Expand source code</span>
</summary>
<pre><code class="python">class MispConfig(Config):
    &#34;&#34;&#34;
    Configuration for access to a MISP instance
    &#34;&#34;&#34;
    misp_url = &#39;&#39;
    misp_key = &#39;&#39;
    misp_verifycert = True

    def __init__(self, config):
        super(MispConfig, self).__init__(config)

    def validate(self):
        logger.debug(&#39;Validating MispConfig...&#39;)
        if not self.misp_url:
            warnings.warn(&#39;Misp url is empty. If you are not using&#39;
                          &#39; the MISP database, ignore&#39;)
        if not self.misp_key:
            warnings.warn(&#39;Misp key is empty. If you are not using&#39;
                          &#39; the MISP database, ignore&#39;)

        self._is_validated = True
        return self</code></pre>
</details>
<h3>Ancestors</h3>
<ul class="hlist">
<li><a title="baskerville.models.config.Config" href="#baskerville.models.config.Config">Config</a></li>
<li><a title="baskerville.util.helpers.SerializableMixin" href="../util/helpers.html#baskerville.util.helpers.SerializableMixin">SerializableMixin</a></li>
</ul>
<h3>Class variables</h3>
<dl>
<dt id="baskerville.models.config.MispConfig.misp_key"><code class="name">var <span class="ident">misp_key</span></code></dt>
<dd>
<section class="desc"><p>str(object='') -&gt; str
str(bytes_or_buffer[, encoding[, errors]]) -&gt; str</p>
<p>Create a new string object from the given object. If encoding or
errors is specified, then the object must expose a data buffer
that will be decoded using the given encoding and error handler.
Otherwise, returns the result of object.<strong>str</strong>() (if defined)
or repr(object).
encoding defaults to sys.getdefaultencoding().
errors defaults to 'strict'.</p></section>
</dd>
<dt id="baskerville.models.config.MispConfig.misp_url"><code class="name">var <span class="ident">misp_url</span></code></dt>
<dd>
<section class="desc"><p>str(object='') -&gt; str
str(bytes_or_buffer[, encoding[, errors]]) -&gt; str</p>
<p>Create a new string object from the given object. If encoding or
errors is specified, then the object must expose a data buffer
that will be decoded using the given encoding and error handler.
Otherwise, returns the result of object.<strong>str</strong>() (if defined)
or repr(object).
encoding defaults to sys.getdefaultencoding().
errors defaults to 'strict'.</p></section>
</dd>
<dt id="baskerville.models.config.MispConfig.misp_verifycert"><code class="name">var <span class="ident">misp_verifycert</span></code></dt>
<dd>
<section class="desc"><p>bool(x) -&gt; bool</p>
<p>Returns True when the argument x is true, False otherwise.
The builtins True and False are the only two instances of the class bool.
The class bool is a subclass of the class int, and cannot be subclassed.</p></section>
</dd>
</dl>
<h3>Methods</h3>
<dl>
<dt id="baskerville.models.config.MispConfig.validate"><code class="name flex">
<span>def <span class="ident">validate</span></span>(<span>self)</span>
</code></dt>
<dd>
<section class="desc"></section>
<details class="source">
<summary>
<span>Expand source code</span>
</summary>
<pre><code class="python">def validate(self):
    logger.debug(&#39;Validating MispConfig...&#39;)
    if not self.misp_url:
        warnings.warn(&#39;Misp url is empty. If you are not using&#39;
                      &#39; the MISP database, ignore&#39;)
    if not self.misp_key:
        warnings.warn(&#39;Misp key is empty. If you are not using&#39;
                      &#39; the MISP database, ignore&#39;)

    self._is_validated = True
    return self</code></pre>
</details>
</dd>
</dl>
<h3>Inherited members</h3>
<ul class="hlist">
<li><code><b><a title="baskerville.models.config.Config" href="#baskerville.models.config.Config">Config</a></b></code>:
<ul class="hlist">
<li><code><a title="baskerville.models.config.Config.to_dict" href="../util/helpers.html#baskerville.util.helpers.SerializableMixin.to_dict">to_dict</a></code></li>
</ul>
</li>
</ul>
</dd>
<dt id="baskerville.models.config.SimulationConfig"><code class="flex name class">
<span>class <span class="ident">SimulationConfig</span></span>
<span>(</span><span>config, parent=None)</span>
</code></dt>
<dd>
<section class="desc"><p>The base Config class</p></section>
<details class="source">
<summary>
<span>Expand source code</span>
</summary>
<pre><code class="python">class SimulationConfig(Config):
    sleep = True
    verbose = False

    def __init__(self, config, parent=None):
        super(SimulationConfig, self).__init__(config, parent)

    def validate(self):
        logger.debug(&#39;Validating SimulationConfig...&#39;)

        self._is_validated = True
        return self</code></pre>
</details>
<h3>Ancestors</h3>
<ul class="hlist">
<li><a title="baskerville.models.config.Config" href="#baskerville.models.config.Config">Config</a></li>
<li><a title="baskerville.util.helpers.SerializableMixin" href="../util/helpers.html#baskerville.util.helpers.SerializableMixin">SerializableMixin</a></li>
</ul>
<h3>Class variables</h3>
<dl>
<dt id="baskerville.models.config.SimulationConfig.sleep"><code class="name">var <span class="ident">sleep</span></code></dt>
<dd>
<section class="desc"><p>bool(x) -&gt; bool</p>
<p>Returns True when the argument x is true, False otherwise.
The builtins True and False are the only two instances of the class bool.
The class bool is a subclass of the class int, and cannot be subclassed.</p></section>
</dd>
<dt id="baskerville.models.config.SimulationConfig.verbose"><code class="name">var <span class="ident">verbose</span></code></dt>
<dd>
<section class="desc"><p>bool(x) -&gt; bool</p>
<p>Returns True when the argument x is true, False otherwise.
The builtins True and False are the only two instances of the class bool.
The class bool is a subclass of the class int, and cannot be subclassed.</p></section>
</dd>
</dl>
<h3>Methods</h3>
<dl>
<dt id="baskerville.models.config.SimulationConfig.validate"><code class="name flex">
<span>def <span class="ident">validate</span></span>(<span>self)</span>
</code></dt>
<dd>
<section class="desc"></section>
<details class="source">
<summary>
<span>Expand source code</span>
</summary>
<pre><code class="python">def validate(self):
    logger.debug(&#39;Validating SimulationConfig...&#39;)

    self._is_validated = True
    return self</code></pre>
</details>
</dd>
</dl>
<h3>Inherited members</h3>
<ul class="hlist">
<li><code><b><a title="baskerville.models.config.Config" href="#baskerville.models.config.Config">Config</a></b></code>:
<ul class="hlist">
<li><code><a title="baskerville.models.config.Config.to_dict" href="../util/helpers.html#baskerville.util.helpers.SerializableMixin.to_dict">to_dict</a></code></li>
</ul>
</li>
</ul>
</dd>
<dt id="baskerville.models.config.SparkConfig"><code class="flex name class">
<span>class <span class="ident">SparkConfig</span></span>
<span>(</span><span>config)</span>
</code></dt>
<dd>
<section class="desc"><p>Spark related configuration.</p></section>
<details class="source">
<summary>
<span>Expand source code</span>
</summary>
<pre><code class="python">class SparkConfig(Config):
    &#34;&#34;&#34;
    Spark related configuration.
    &#34;&#34;&#34;
    app_name = None
    master = None
    parallelism = None
    log_conf = None
    log_level = None
    session_timezone = None
    shuffle_partitions = None
    spark_driver_memory = None
    db_driver = None
    jars = &#39;&#39;
    metrics_conf = None
    jar_packages = None
    jars_repositories = None
    event_log = None
    serializer = None
    kryoserializer_buffer_max = None
    kryoserializer_buffer = None
    driver_java_options = None
    executor_extra_java_options = None
    driver_extra_class_path = None
    spark_executor_instances = None
    spark_executor_cores = None
    spark_executor_memory = None
    spark_python_profile = False
    storage_level = None

    def __init__(self, config):
        super(SparkConfig, self).__init__(config)

    def validate(self):
        logger.debug(&#39;Validating SparkConfig...&#39;)
        from baskerville.spark.helpers import StorageLevelFactory

        if not self.storage_level:
            self.storage_level = StorageLevelFactory.get_storage_level(
                &#39;OFF_HEAP&#39;
            )
            logger.warn(&#39;Default spark storage level set to OFF_HEAP&#39;)
        else:
            self.storage_level = StorageLevelFactory.get_storage_level(
                self.storage_level
            )

        if not self.session_timezone:
            self.session_timezone = &#39;UTC&#39;
            logger.info(&#39;session_timezone not defined, set default: UTC&#39;)
        if not self.master:
            if self.parallelism and self.parallelism &gt; 0:
                self.master = &#39;local[{}]&#39;.format(self.parallelism)
            else:
                self.master = &#39;local&#39;
            warnings.warn(&#39;Master is empty, defalting to {}&#39;.format(
                self.master
            ))
            if self.log_conf == &#39;true&#39;:
                if not self.log_level:
                    warnings.warn(
                        &#39;You have set log_conf but not log_level, &#39;
                        &#39;the log level will be spark\&#39;s default&#39;.format(
                            self.master
                        )
                    )
        if isinstance(self.shuffle_partitions, str):
            try:
                self.shuffle_partitions = int(self.shuffle_partitions)
            except ValueError:
                self.add_error(ConfigError(
                    &#39;Spark shuffle_partitions should be an integer&#39;,
                    [&#39;shuffle_partitions&#39;],
                ))
                # raise ValueError(
                #     &#39;Spark shuffle_partitions should be an integer&#39;
                # )
        elif self.shuffle_partitions is None:
            self.shuffle_partitions = 14
            warnings.warn(&#39;Spark shuffle partitions are set to 14.&#39;)
        if not self.db_driver:
            self.add_error(ConfigError(
                &#39;Db driver cannot be empty&#39;,
                [&#39;db_driver&#39;],
            ))
            # raise ValueError(&#39;Db driver cannot be empty&#39;)
        if not self.event_log:
            self.event_log = &#39;false&#39;
        else:
            self.event_log = &#39;true&#39;

        if self.metrics_conf and not self.jar_packages:
            warnings.warn(&#39;Spark metrics configuration has been set but &#39;
                          &#39;jar packages is empty, &#39;
                          &#39;is this the correct behavior?&#39;)

        if not self.jars:
            warnings.warn(&#39;Spark jars is not defined, at least one jar for the&#39;
                          &#39;database connection should be defined, &#39;
                          &#39;please check.&#39;)

        if self.kryoserializer_buffer_max:
            if not isinstance(self.kryoserializer_buffer_max, str):
                self.add_error(ConfigError(
                    &#39;Wrong value for serializer_buffer_max, &#39;
                    &#39;please use string values, e.g.: \&#39;2048m\&#39; &#39;
                    &#39;(maximum value)&#39;,
                    [&#39;kryoserializer_buffer_max&#39;],
                ))
                # raise ValueError(&#39;Wrong value for serializer_buffer_max, &#39;
                #                  &#39;please use string values, e.g.: \&#39;2048m\&#39; &#39;
                #                  &#39;(maximum value)&#39;)
            if self.kryoserializer_buffer_max[-1] == &#39;m&#39; and \
                    int(self.kryoserializer_buffer_max[:-1]) &gt; 2048:
                self.add_error(ConfigError(
                    &#39;Spark serializer_buffer_max cannot be more than 2048m&#39;,
                    [&#39;kryoserializer_buffer_max&#39;],
                ))
                # raise ValueError(
                #     &#39;Spark serializer_buffer_max cannot be more than 2048m&#39;)

        if self.kryoserializer_buffer:
            if not isinstance(self.kryoserializer_buffer, str):
                self.add_error(ConfigError(
                    &#39;Wrong value for serializer_buffer, &#39;
                    &#39;please use string values, e.g.: \&#39;2048k\&#39;&#39;,
                    [&#39;kryoserializer_buffer&#39;],
                ))
                # raise ValueError(&#39;Wrong value for serializer_buffer, &#39;
                #                  &#39;please use string values, e.g.: \&#39;2048k\&#39;&#39;)
            if self.kryoserializer_buffer[-1] == &#39;k&#39; and \
                    int(self.kryoserializer_buffer[:-1]) &gt; 2048:
                self.add_error(ConfigError(
                    &#39;Spark serializer_buffer_max cannot be more than 2048k&#39;,
                    [&#39;serializer_buffer_max&#39;],
                ))
                # raise ValueError(
                #     &#39;Spark serializer_buffer_max cannot be more than 2048k&#39;)
            if self.kryoserializer_buffer[-1] == \
                    self.kryoserializer_buffer_max[-1]:
                if int(self.kryoserializer_buffer_max[:-1]) &lt; \
                        int(self.kryoserializer_buffer[:-1]):
                    self.add_error(ConfigError(
                        &#39;serializer_buffer\&#39;s value cannot be &#39;
                        &#39;greater than serializer_buffer_max&#39;,
                        [&#39;kryoserializer_buffer&#39;],
                    ))
                    # raise ValueError(&#39;serializer_buffer\&#39;s value cannot be &#39;
                    #                  &#39;greater than serializer_buffer_max&#39;)

        self._is_validated = True
        return self</code></pre>
</details>
<h3>Ancestors</h3>
<ul class="hlist">
<li><a title="baskerville.models.config.Config" href="#baskerville.models.config.Config">Config</a></li>
<li><a title="baskerville.util.helpers.SerializableMixin" href="../util/helpers.html#baskerville.util.helpers.SerializableMixin">SerializableMixin</a></li>
</ul>
<h3>Class variables</h3>
<dl>
<dt id="baskerville.models.config.SparkConfig.app_name"><code class="name">var <span class="ident">app_name</span></code></dt>
<dd>
<section class="desc"></section>
</dd>
<dt id="baskerville.models.config.SparkConfig.db_driver"><code class="name">var <span class="ident">db_driver</span></code></dt>
<dd>
<section class="desc"></section>
</dd>
<dt id="baskerville.models.config.SparkConfig.driver_extra_class_path"><code class="name">var <span class="ident">driver_extra_class_path</span></code></dt>
<dd>
<section class="desc"></section>
</dd>
<dt id="baskerville.models.config.SparkConfig.driver_java_options"><code class="name">var <span class="ident">driver_java_options</span></code></dt>
<dd>
<section class="desc"></section>
</dd>
<dt id="baskerville.models.config.SparkConfig.event_log"><code class="name">var <span class="ident">event_log</span></code></dt>
<dd>
<section class="desc"></section>
</dd>
<dt id="baskerville.models.config.SparkConfig.executor_extra_java_options"><code class="name">var <span class="ident">executor_extra_java_options</span></code></dt>
<dd>
<section class="desc"></section>
</dd>
<dt id="baskerville.models.config.SparkConfig.jar_packages"><code class="name">var <span class="ident">jar_packages</span></code></dt>
<dd>
<section class="desc"></section>
</dd>
<dt id="baskerville.models.config.SparkConfig.jars"><code class="name">var <span class="ident">jars</span></code></dt>
<dd>
<section class="desc"><p>str(object='') -&gt; str
str(bytes_or_buffer[, encoding[, errors]]) -&gt; str</p>
<p>Create a new string object from the given object. If encoding or
errors is specified, then the object must expose a data buffer
that will be decoded using the given encoding and error handler.
Otherwise, returns the result of object.<strong>str</strong>() (if defined)
or repr(object).
encoding defaults to sys.getdefaultencoding().
errors defaults to 'strict'.</p></section>
</dd>
<dt id="baskerville.models.config.SparkConfig.jars_repositories"><code class="name">var <span class="ident">jars_repositories</span></code></dt>
<dd>
<section class="desc"></section>
</dd>
<dt id="baskerville.models.config.SparkConfig.kryoserializer_buffer"><code class="name">var <span class="ident">kryoserializer_buffer</span></code></dt>
<dd>
<section class="desc"></section>
</dd>
<dt id="baskerville.models.config.SparkConfig.kryoserializer_buffer_max"><code class="name">var <span class="ident">kryoserializer_buffer_max</span></code></dt>
<dd>
<section class="desc"></section>
</dd>
<dt id="baskerville.models.config.SparkConfig.log_conf"><code class="name">var <span class="ident">log_conf</span></code></dt>
<dd>
<section class="desc"></section>
</dd>
<dt id="baskerville.models.config.SparkConfig.log_level"><code class="name">var <span class="ident">log_level</span></code></dt>
<dd>
<section class="desc"></section>
</dd>
<dt id="baskerville.models.config.SparkConfig.master"><code class="name">var <span class="ident">master</span></code></dt>
<dd>
<section class="desc"></section>
</dd>
<dt id="baskerville.models.config.SparkConfig.metrics_conf"><code class="name">var <span class="ident">metrics_conf</span></code></dt>
<dd>
<section class="desc"></section>
</dd>
<dt id="baskerville.models.config.SparkConfig.parallelism"><code class="name">var <span class="ident">parallelism</span></code></dt>
<dd>
<section class="desc"></section>
</dd>
<dt id="baskerville.models.config.SparkConfig.serializer"><code class="name">var <span class="ident">serializer</span></code></dt>
<dd>
<section class="desc"></section>
</dd>
<dt id="baskerville.models.config.SparkConfig.session_timezone"><code class="name">var <span class="ident">session_timezone</span></code></dt>
<dd>
<section class="desc"></section>
</dd>
<dt id="baskerville.models.config.SparkConfig.shuffle_partitions"><code class="name">var <span class="ident">shuffle_partitions</span></code></dt>
<dd>
<section class="desc"></section>
</dd>
<dt id="baskerville.models.config.SparkConfig.spark_driver_memory"><code class="name">var <span class="ident">spark_driver_memory</span></code></dt>
<dd>
<section class="desc"></section>
</dd>
<dt id="baskerville.models.config.SparkConfig.spark_executor_cores"><code class="name">var <span class="ident">spark_executor_cores</span></code></dt>
<dd>
<section class="desc"></section>
</dd>
<dt id="baskerville.models.config.SparkConfig.spark_executor_instances"><code class="name">var <span class="ident">spark_executor_instances</span></code></dt>
<dd>
<section class="desc"></section>
</dd>
<dt id="baskerville.models.config.SparkConfig.spark_executor_memory"><code class="name">var <span class="ident">spark_executor_memory</span></code></dt>
<dd>
<section class="desc"></section>
</dd>
<dt id="baskerville.models.config.SparkConfig.spark_python_profile"><code class="name">var <span class="ident">spark_python_profile</span></code></dt>
<dd>
<section class="desc"><p>bool(x) -&gt; bool</p>
<p>Returns True when the argument x is true, False otherwise.
The builtins True and False are the only two instances of the class bool.
The class bool is a subclass of the class int, and cannot be subclassed.</p></section>
</dd>
<dt id="baskerville.models.config.SparkConfig.storage_level"><code class="name">var <span class="ident">storage_level</span></code></dt>
<dd>
<section class="desc"></section>
</dd>
</dl>
<h3>Methods</h3>
<dl>
<dt id="baskerville.models.config.SparkConfig.validate"><code class="name flex">
<span>def <span class="ident">validate</span></span>(<span>self)</span>
</code></dt>
<dd>
<section class="desc"></section>
<details class="source">
<summary>
<span>Expand source code</span>
</summary>
<pre><code class="python">def validate(self):
    logger.debug(&#39;Validating SparkConfig...&#39;)
    from baskerville.spark.helpers import StorageLevelFactory

    if not self.storage_level:
        self.storage_level = StorageLevelFactory.get_storage_level(
            &#39;OFF_HEAP&#39;
        )
        logger.warn(&#39;Default spark storage level set to OFF_HEAP&#39;)
    else:
        self.storage_level = StorageLevelFactory.get_storage_level(
            self.storage_level
        )

    if not self.session_timezone:
        self.session_timezone = &#39;UTC&#39;
        logger.info(&#39;session_timezone not defined, set default: UTC&#39;)
    if not self.master:
        if self.parallelism and self.parallelism &gt; 0:
            self.master = &#39;local[{}]&#39;.format(self.parallelism)
        else:
            self.master = &#39;local&#39;
        warnings.warn(&#39;Master is empty, defalting to {}&#39;.format(
            self.master
        ))
        if self.log_conf == &#39;true&#39;:
            if not self.log_level:
                warnings.warn(
                    &#39;You have set log_conf but not log_level, &#39;
                    &#39;the log level will be spark\&#39;s default&#39;.format(
                        self.master
                    )
                )
    if isinstance(self.shuffle_partitions, str):
        try:
            self.shuffle_partitions = int(self.shuffle_partitions)
        except ValueError:
            self.add_error(ConfigError(
                &#39;Spark shuffle_partitions should be an integer&#39;,
                [&#39;shuffle_partitions&#39;],
            ))
            # raise ValueError(
            #     &#39;Spark shuffle_partitions should be an integer&#39;
            # )
    elif self.shuffle_partitions is None:
        self.shuffle_partitions = 14
        warnings.warn(&#39;Spark shuffle partitions are set to 14.&#39;)
    if not self.db_driver:
        self.add_error(ConfigError(
            &#39;Db driver cannot be empty&#39;,
            [&#39;db_driver&#39;],
        ))
        # raise ValueError(&#39;Db driver cannot be empty&#39;)
    if not self.event_log:
        self.event_log = &#39;false&#39;
    else:
        self.event_log = &#39;true&#39;

    if self.metrics_conf and not self.jar_packages:
        warnings.warn(&#39;Spark metrics configuration has been set but &#39;
                      &#39;jar packages is empty, &#39;
                      &#39;is this the correct behavior?&#39;)

    if not self.jars:
        warnings.warn(&#39;Spark jars is not defined, at least one jar for the&#39;
                      &#39;database connection should be defined, &#39;
                      &#39;please check.&#39;)

    if self.kryoserializer_buffer_max:
        if not isinstance(self.kryoserializer_buffer_max, str):
            self.add_error(ConfigError(
                &#39;Wrong value for serializer_buffer_max, &#39;
                &#39;please use string values, e.g.: \&#39;2048m\&#39; &#39;
                &#39;(maximum value)&#39;,
                [&#39;kryoserializer_buffer_max&#39;],
            ))
            # raise ValueError(&#39;Wrong value for serializer_buffer_max, &#39;
            #                  &#39;please use string values, e.g.: \&#39;2048m\&#39; &#39;
            #                  &#39;(maximum value)&#39;)
        if self.kryoserializer_buffer_max[-1] == &#39;m&#39; and \
                int(self.kryoserializer_buffer_max[:-1]) &gt; 2048:
            self.add_error(ConfigError(
                &#39;Spark serializer_buffer_max cannot be more than 2048m&#39;,
                [&#39;kryoserializer_buffer_max&#39;],
            ))
            # raise ValueError(
            #     &#39;Spark serializer_buffer_max cannot be more than 2048m&#39;)

    if self.kryoserializer_buffer:
        if not isinstance(self.kryoserializer_buffer, str):
            self.add_error(ConfigError(
                &#39;Wrong value for serializer_buffer, &#39;
                &#39;please use string values, e.g.: \&#39;2048k\&#39;&#39;,
                [&#39;kryoserializer_buffer&#39;],
            ))
            # raise ValueError(&#39;Wrong value for serializer_buffer, &#39;
            #                  &#39;please use string values, e.g.: \&#39;2048k\&#39;&#39;)
        if self.kryoserializer_buffer[-1] == &#39;k&#39; and \
                int(self.kryoserializer_buffer[:-1]) &gt; 2048:
            self.add_error(ConfigError(
                &#39;Spark serializer_buffer_max cannot be more than 2048k&#39;,
                [&#39;serializer_buffer_max&#39;],
            ))
            # raise ValueError(
            #     &#39;Spark serializer_buffer_max cannot be more than 2048k&#39;)
        if self.kryoserializer_buffer[-1] == \
                self.kryoserializer_buffer_max[-1]:
            if int(self.kryoserializer_buffer_max[:-1]) &lt; \
                    int(self.kryoserializer_buffer[:-1]):
                self.add_error(ConfigError(
                    &#39;serializer_buffer\&#39;s value cannot be &#39;
                    &#39;greater than serializer_buffer_max&#39;,
                    [&#39;kryoserializer_buffer&#39;],
                ))
                # raise ValueError(&#39;serializer_buffer\&#39;s value cannot be &#39;
                #                  &#39;greater than serializer_buffer_max&#39;)

    self._is_validated = True
    return self</code></pre>
</details>
</dd>
</dl>
<h3>Inherited members</h3>
<ul class="hlist">
<li><code><b><a title="baskerville.models.config.Config" href="#baskerville.models.config.Config">Config</a></b></code>:
<ul class="hlist">
<li><code><a title="baskerville.models.config.Config.to_dict" href="../util/helpers.html#baskerville.util.helpers.SerializableMixin.to_dict">to_dict</a></code></li>
</ul>
</li>
</ul>
</dd>
</dl>
</section>
</article>
<nav id="sidebar">
<h1>Index</h1>
<div class="toc">
<ul></ul>
</div>
<ul id="index">
<li><h3>Super-module</h3>
<ul>
<li><code><a title="baskerville.models" href="index.html">baskerville.models</a></code></li>
</ul>
</li>
<li><h3><a href="#header-classes">Classes</a></h3>
<ul>
<li>
<h4><code><a title="baskerville.models.config.BaskervilleConfig" href="#baskerville.models.config.BaskervilleConfig">BaskervilleConfig</a></code></h4>
<ul class="two-column">
<li><code><a title="baskerville.models.config.BaskervilleConfig.database" href="#baskerville.models.config.BaskervilleConfig.database">database</a></code></li>
<li><code><a title="baskerville.models.config.BaskervilleConfig.elastic_db" href="#baskerville.models.config.BaskervilleConfig.elastic_db">elastic_db</a></code></li>
<li><code><a title="baskerville.models.config.BaskervilleConfig.engine" href="#baskerville.models.config.BaskervilleConfig.engine">engine</a></code></li>
<li><code><a title="baskerville.models.config.BaskervilleConfig.kafka" href="#baskerville.models.config.BaskervilleConfig.kafka">kafka</a></code></li>
<li><code><a title="baskerville.models.config.BaskervilleConfig.misp_db" href="#baskerville.models.config.BaskervilleConfig.misp_db">misp_db</a></code></li>
<li><code><a title="baskerville.models.config.BaskervilleConfig.spark" href="#baskerville.models.config.BaskervilleConfig.spark">spark</a></code></li>
<li><code><a title="baskerville.models.config.BaskervilleConfig.validate" href="#baskerville.models.config.BaskervilleConfig.validate">validate</a></code></li>
</ul>
</li>
<li>
<h4><code><a title="baskerville.models.config.Config" href="#baskerville.models.config.Config">Config</a></code></h4>
<ul class="two-column">
<li><code><a title="baskerville.models.config.Config.add_error" href="#baskerville.models.config.Config.add_error">add_error</a></code></li>
<li><code><a title="baskerville.models.config.Config.errors" href="#baskerville.models.config.Config.errors">errors</a></code></li>
<li><code><a title="baskerville.models.config.Config.report" href="#baskerville.models.config.Config.report">report</a></code></li>
<li><code><a title="baskerville.models.config.Config.serialized_errors" href="#baskerville.models.config.Config.serialized_errors">serialized_errors</a></code></li>
<li><code><a title="baskerville.models.config.Config.set_logger" href="#baskerville.models.config.Config.set_logger">set_logger</a></code></li>
<li><code><a title="baskerville.models.config.Config.validate" href="#baskerville.models.config.Config.validate">validate</a></code></li>
</ul>
</li>
<li>
<h4><code><a title="baskerville.models.config.ConfigError" href="#baskerville.models.config.ConfigError">ConfigError</a></code></h4>
</li>
<li>
<h4><code><a title="baskerville.models.config.ConfigErrorReport" href="#baskerville.models.config.ConfigErrorReport">ConfigErrorReport</a></code></h4>
<ul class="">
<li><code><a title="baskerville.models.config.ConfigErrorReport.add_error" href="#baskerville.models.config.ConfigErrorReport.add_error">add_error</a></code></li>
<li><code><a title="baskerville.models.config.ConfigErrorReport.errors" href="#baskerville.models.config.ConfigErrorReport.errors">errors</a></code></li>
<li><code><a title="baskerville.models.config.ConfigErrorReport.report" href="#baskerville.models.config.ConfigErrorReport.report">report</a></code></li>
<li><code><a title="baskerville.models.config.ConfigErrorReport.serialized_errors" href="#baskerville.models.config.ConfigErrorReport.serialized_errors">serialized_errors</a></code></li>
</ul>
</li>
<li>
<h4><code><a title="baskerville.models.config.DataArchiveConfig" href="#baskerville.models.config.DataArchiveConfig">DataArchiveConfig</a></code></h4>
<ul class="">
<li><code><a title="baskerville.models.config.DataArchiveConfig.since" href="#baskerville.models.config.DataArchiveConfig.since">since</a></code></li>
<li><code><a title="baskerville.models.config.DataArchiveConfig.template" href="#baskerville.models.config.DataArchiveConfig.template">template</a></code></li>
<li><code><a title="baskerville.models.config.DataArchiveConfig.until" href="#baskerville.models.config.DataArchiveConfig.until">until</a></code></li>
<li><code><a title="baskerville.models.config.DataArchiveConfig.validate" href="#baskerville.models.config.DataArchiveConfig.validate">validate</a></code></li>
</ul>
</li>
<li>
<h4><code><a title="baskerville.models.config.DataParsingConfig" href="#baskerville.models.config.DataParsingConfig">DataParsingConfig</a></code></h4>
<ul class="two-column">
<li><code><a title="baskerville.models.config.DataParsingConfig.group_by_cols" href="#baskerville.models.config.DataParsingConfig.group_by_cols">group_by_cols</a></code></li>
<li><code><a title="baskerville.models.config.DataParsingConfig.parser" href="#baskerville.models.config.DataParsingConfig.parser">parser</a></code></li>
<li><code><a title="baskerville.models.config.DataParsingConfig.schema" href="#baskerville.models.config.DataParsingConfig.schema">schema</a></code></li>
<li><code><a title="baskerville.models.config.DataParsingConfig.schema_obj" href="#baskerville.models.config.DataParsingConfig.schema_obj">schema_obj</a></code></li>
<li><code><a title="baskerville.models.config.DataParsingConfig.timestamp_column" href="#baskerville.models.config.DataParsingConfig.timestamp_column">timestamp_column</a></code></li>
<li><code><a title="baskerville.models.config.DataParsingConfig.validate" href="#baskerville.models.config.DataParsingConfig.validate">validate</a></code></li>
</ul>
</li>
<li>
<h4><code><a title="baskerville.models.config.DataPartitionConfig" href="#baskerville.models.config.DataPartitionConfig">DataPartitionConfig</a></code></h4>
<ul class="">
<li><code><a title="baskerville.models.config.DataPartitionConfig.index_by" href="#baskerville.models.config.DataPartitionConfig.index_by">index_by</a></code></li>
<li><code><a title="baskerville.models.config.DataPartitionConfig.since" href="#baskerville.models.config.DataPartitionConfig.since">since</a></code></li>
<li><code><a title="baskerville.models.config.DataPartitionConfig.template" href="#baskerville.models.config.DataPartitionConfig.template">template</a></code></li>
<li><code><a title="baskerville.models.config.DataPartitionConfig.until" href="#baskerville.models.config.DataPartitionConfig.until">until</a></code></li>
<li><code><a title="baskerville.models.config.DataPartitionConfig.validate" href="#baskerville.models.config.DataPartitionConfig.validate">validate</a></code></li>
</ul>
</li>
<li>
<h4><code><a title="baskerville.models.config.DatabaseConfig" href="#baskerville.models.config.DatabaseConfig">DatabaseConfig</a></code></h4>
<ul class="two-column">
<li><code><a title="baskerville.models.config.DatabaseConfig.host" href="#baskerville.models.config.DatabaseConfig.host">host</a></code></li>
<li><code><a title="baskerville.models.config.DatabaseConfig.maintenance" href="#baskerville.models.config.DatabaseConfig.maintenance">maintenance</a></code></li>
<li><code><a title="baskerville.models.config.DatabaseConfig.name" href="#baskerville.models.config.DatabaseConfig.name">name</a></code></li>
<li><code><a title="baskerville.models.config.DatabaseConfig.password" href="#baskerville.models.config.DatabaseConfig.password">password</a></code></li>
<li><code><a title="baskerville.models.config.DatabaseConfig.port" href="#baskerville.models.config.DatabaseConfig.port">port</a></code></li>
<li><code><a title="baskerville.models.config.DatabaseConfig.type" href="#baskerville.models.config.DatabaseConfig.type">type</a></code></li>
<li><code><a title="baskerville.models.config.DatabaseConfig.user" href="#baskerville.models.config.DatabaseConfig.user">user</a></code></li>
<li><code><a title="baskerville.models.config.DatabaseConfig.validate" href="#baskerville.models.config.DatabaseConfig.validate">validate</a></code></li>
</ul>
</li>
<li>
<h4><code><a title="baskerville.models.config.ElasticConfig" href="#baskerville.models.config.ElasticConfig">ElasticConfig</a></code></h4>
<ul class="two-column">
<li><code><a title="baskerville.models.config.ElasticConfig.base_index" href="#baskerville.models.config.ElasticConfig.base_index">base_index</a></code></li>
<li><code><a title="baskerville.models.config.ElasticConfig.host" href="#baskerville.models.config.ElasticConfig.host">host</a></code></li>
<li><code><a title="baskerville.models.config.ElasticConfig.index_type" href="#baskerville.models.config.ElasticConfig.index_type">index_type</a></code></li>
<li><code><a title="baskerville.models.config.ElasticConfig.password" href="#baskerville.models.config.ElasticConfig.password">password</a></code></li>
<li><code><a title="baskerville.models.config.ElasticConfig.user" href="#baskerville.models.config.ElasticConfig.user">user</a></code></li>
<li><code><a title="baskerville.models.config.ElasticConfig.validate" href="#baskerville.models.config.ElasticConfig.validate">validate</a></code></li>
</ul>
</li>
<li>
<h4><code><a title="baskerville.models.config.EngineConfig" href="#baskerville.models.config.EngineConfig">EngineConfig</a></code></h4>
<ul class="two-column">
<li><code><a title="baskerville.models.config.EngineConfig.all_features" href="#baskerville.models.config.EngineConfig.all_features">all_features</a></code></li>
<li><code><a title="baskerville.models.config.EngineConfig.cache_expire_time" href="#baskerville.models.config.EngineConfig.cache_expire_time">cache_expire_time</a></code></li>
<li><code><a title="baskerville.models.config.EngineConfig.cache_load_past" href="#baskerville.models.config.EngineConfig.cache_load_past">cache_load_past</a></code></li>
<li><code><a title="baskerville.models.config.EngineConfig.cross_reference" href="#baskerville.models.config.EngineConfig.cross_reference">cross_reference</a></code></li>
<li><code><a title="baskerville.models.config.EngineConfig.data_config" href="#baskerville.models.config.EngineConfig.data_config">data_config</a></code></li>
<li><code><a title="baskerville.models.config.EngineConfig.datetime_format" href="#baskerville.models.config.EngineConfig.datetime_format">datetime_format</a></code></li>
<li><code><a title="baskerville.models.config.EngineConfig.extra_features" href="#baskerville.models.config.EngineConfig.extra_features">extra_features</a></code></li>
<li><code><a title="baskerville.models.config.EngineConfig.load_test" href="#baskerville.models.config.EngineConfig.load_test">load_test</a></code></li>
<li><code><a title="baskerville.models.config.EngineConfig.log_level" href="#baskerville.models.config.EngineConfig.log_level">log_level</a></code></li>
<li><code><a title="baskerville.models.config.EngineConfig.logpath" href="#baskerville.models.config.EngineConfig.logpath">logpath</a></code></li>
<li><code><a title="baskerville.models.config.EngineConfig.manual_es" href="#baskerville.models.config.EngineConfig.manual_es">manual_es</a></code></li>
<li><code><a title="baskerville.models.config.EngineConfig.manual_rawlog" href="#baskerville.models.config.EngineConfig.manual_rawlog">manual_rawlog</a></code></li>
<li><code><a title="baskerville.models.config.EngineConfig.metrics" href="#baskerville.models.config.EngineConfig.metrics">metrics</a></code></li>
<li><code><a title="baskerville.models.config.EngineConfig.model_path" href="#baskerville.models.config.EngineConfig.model_path">model_path</a></code></li>
<li><code><a title="baskerville.models.config.EngineConfig.model_version_id" href="#baskerville.models.config.EngineConfig.model_version_id">model_version_id</a></code></li>
<li><code><a title="baskerville.models.config.EngineConfig.simulation" href="#baskerville.models.config.EngineConfig.simulation">simulation</a></code></li>
<li><code><a title="baskerville.models.config.EngineConfig.time_bucket" href="#baskerville.models.config.EngineConfig.time_bucket">time_bucket</a></code></li>
<li><code><a title="baskerville.models.config.EngineConfig.validate" href="#baskerville.models.config.EngineConfig.validate">validate</a></code></li>
<li><code><a title="baskerville.models.config.EngineConfig.verbose" href="#baskerville.models.config.EngineConfig.verbose">verbose</a></code></li>
</ul>
</li>
<li>
<h4><code><a title="baskerville.models.config.KafkaConfig" href="#baskerville.models.config.KafkaConfig">KafkaConfig</a></code></h4>
<ul class="">
<li><code><a title="baskerville.models.config.KafkaConfig.consume_topic" href="#baskerville.models.config.KafkaConfig.consume_topic">consume_topic</a></code></li>
<li><code><a title="baskerville.models.config.KafkaConfig.publish_logs" href="#baskerville.models.config.KafkaConfig.publish_logs">publish_logs</a></code></li>
<li><code><a title="baskerville.models.config.KafkaConfig.publish_predictions" href="#baskerville.models.config.KafkaConfig.publish_predictions">publish_predictions</a></code></li>
<li><code><a title="baskerville.models.config.KafkaConfig.publish_stats" href="#baskerville.models.config.KafkaConfig.publish_stats">publish_stats</a></code></li>
<li><code><a title="baskerville.models.config.KafkaConfig.ssl_truststore_location" href="#baskerville.models.config.KafkaConfig.ssl_truststore_location">ssl_truststore_location</a></code></li>
<li><code><a title="baskerville.models.config.KafkaConfig.ssl_truststore_password" href="#baskerville.models.config.KafkaConfig.ssl_truststore_password">ssl_truststore_password</a></code></li>
<li><code><a title="baskerville.models.config.KafkaConfig.url" href="#baskerville.models.config.KafkaConfig.url">url</a></code></li>
<li><code><a title="baskerville.models.config.KafkaConfig.validate" href="#baskerville.models.config.KafkaConfig.validate">validate</a></code></li>
<li><code><a title="baskerville.models.config.KafkaConfig.zookeeper" href="#baskerville.models.config.KafkaConfig.zookeeper">zookeeper</a></code></li>
</ul>
</li>
<li>
<h4><code><a title="baskerville.models.config.MaintenanceConfig" href="#baskerville.models.config.MaintenanceConfig">MaintenanceConfig</a></code></h4>
<ul class="two-column">
<li><code><a title="baskerville.models.config.MaintenanceConfig.data_archive" href="#baskerville.models.config.MaintenanceConfig.data_archive">data_archive</a></code></li>
<li><code><a title="baskerville.models.config.MaintenanceConfig.data_partition" href="#baskerville.models.config.MaintenanceConfig.data_partition">data_partition</a></code></li>
<li><code><a title="baskerville.models.config.MaintenanceConfig.keep_data_for" href="#baskerville.models.config.MaintenanceConfig.keep_data_for">keep_data_for</a></code></li>
<li><code><a title="baskerville.models.config.MaintenanceConfig.partition_by" href="#baskerville.models.config.MaintenanceConfig.partition_by">partition_by</a></code></li>
<li><code><a title="baskerville.models.config.MaintenanceConfig.partition_field" href="#baskerville.models.config.MaintenanceConfig.partition_field">partition_field</a></code></li>
<li><code><a title="baskerville.models.config.MaintenanceConfig.partition_table" href="#baskerville.models.config.MaintenanceConfig.partition_table">partition_table</a></code></li>
<li><code><a title="baskerville.models.config.MaintenanceConfig.template_folder" href="#baskerville.models.config.MaintenanceConfig.template_folder">template_folder</a></code></li>
<li><code><a title="baskerville.models.config.MaintenanceConfig.validate" href="#baskerville.models.config.MaintenanceConfig.validate">validate</a></code></li>
</ul>
</li>
<li>
<h4><code><a title="baskerville.models.config.ManualEsConfig" href="#baskerville.models.config.ManualEsConfig">ManualEsConfig</a></code></h4>
<ul class="two-column">
<li><code><a title="baskerville.models.config.ManualEsConfig.batch_length" href="#baskerville.models.config.ManualEsConfig.batch_length">batch_length</a></code></li>
<li><code><a title="baskerville.models.config.ManualEsConfig.hosts" href="#baskerville.models.config.ManualEsConfig.hosts">hosts</a></code></li>
<li><code><a title="baskerville.models.config.ManualEsConfig.save_logs_dir" href="#baskerville.models.config.ManualEsConfig.save_logs_dir">save_logs_dir</a></code></li>
<li><code><a title="baskerville.models.config.ManualEsConfig.start" href="#baskerville.models.config.ManualEsConfig.start">start</a></code></li>
<li><code><a title="baskerville.models.config.ManualEsConfig.stop" href="#baskerville.models.config.ManualEsConfig.stop">stop</a></code></li>
<li><code><a title="baskerville.models.config.ManualEsConfig.validate" href="#baskerville.models.config.ManualEsConfig.validate">validate</a></code></li>
</ul>
</li>
<li>
<h4><code><a title="baskerville.models.config.ManualRawlogConfig" href="#baskerville.models.config.ManualRawlogConfig">ManualRawlogConfig</a></code></h4>
<ul class="">
<li><code><a title="baskerville.models.config.ManualRawlogConfig.raw_logs_paths" href="#baskerville.models.config.ManualRawlogConfig.raw_logs_paths">raw_logs_paths</a></code></li>
<li><code><a title="baskerville.models.config.ManualRawlogConfig.validate" href="#baskerville.models.config.ManualRawlogConfig.validate">validate</a></code></li>
</ul>
</li>
<li>
<h4><code><a title="baskerville.models.config.MetricsConfig" href="#baskerville.models.config.MetricsConfig">MetricsConfig</a></code></h4>
<ul class="">
<li><code><a title="baskerville.models.config.MetricsConfig.flag" href="#baskerville.models.config.MetricsConfig.flag">flag</a></code></li>
<li><code><a title="baskerville.models.config.MetricsConfig.performance" href="#baskerville.models.config.MetricsConfig.performance">performance</a></code></li>
<li><code><a title="baskerville.models.config.MetricsConfig.port" href="#baskerville.models.config.MetricsConfig.port">port</a></code></li>
<li><code><a title="baskerville.models.config.MetricsConfig.progress" href="#baskerville.models.config.MetricsConfig.progress">progress</a></code></li>
<li><code><a title="baskerville.models.config.MetricsConfig.validate" href="#baskerville.models.config.MetricsConfig.validate">validate</a></code></li>
</ul>
</li>
<li>
<h4><code><a title="baskerville.models.config.MispConfig" href="#baskerville.models.config.MispConfig">MispConfig</a></code></h4>
<ul class="">
<li><code><a title="baskerville.models.config.MispConfig.misp_key" href="#baskerville.models.config.MispConfig.misp_key">misp_key</a></code></li>
<li><code><a title="baskerville.models.config.MispConfig.misp_url" href="#baskerville.models.config.MispConfig.misp_url">misp_url</a></code></li>
<li><code><a title="baskerville.models.config.MispConfig.misp_verifycert" href="#baskerville.models.config.MispConfig.misp_verifycert">misp_verifycert</a></code></li>
<li><code><a title="baskerville.models.config.MispConfig.validate" href="#baskerville.models.config.MispConfig.validate">validate</a></code></li>
</ul>
</li>
<li>
<h4><code><a title="baskerville.models.config.SimulationConfig" href="#baskerville.models.config.SimulationConfig">SimulationConfig</a></code></h4>
<ul class="">
<li><code><a title="baskerville.models.config.SimulationConfig.sleep" href="#baskerville.models.config.SimulationConfig.sleep">sleep</a></code></li>
<li><code><a title="baskerville.models.config.SimulationConfig.validate" href="#baskerville.models.config.SimulationConfig.validate">validate</a></code></li>
<li><code><a title="baskerville.models.config.SimulationConfig.verbose" href="#baskerville.models.config.SimulationConfig.verbose">verbose</a></code></li>
</ul>
</li>
<li>
<h4><code><a title="baskerville.models.config.SparkConfig" href="#baskerville.models.config.SparkConfig">SparkConfig</a></code></h4>
<ul class="">
<li><code><a title="baskerville.models.config.SparkConfig.app_name" href="#baskerville.models.config.SparkConfig.app_name">app_name</a></code></li>
<li><code><a title="baskerville.models.config.SparkConfig.db_driver" href="#baskerville.models.config.SparkConfig.db_driver">db_driver</a></code></li>
<li><code><a title="baskerville.models.config.SparkConfig.driver_extra_class_path" href="#baskerville.models.config.SparkConfig.driver_extra_class_path">driver_extra_class_path</a></code></li>
<li><code><a title="baskerville.models.config.SparkConfig.driver_java_options" href="#baskerville.models.config.SparkConfig.driver_java_options">driver_java_options</a></code></li>
<li><code><a title="baskerville.models.config.SparkConfig.event_log" href="#baskerville.models.config.SparkConfig.event_log">event_log</a></code></li>
<li><code><a title="baskerville.models.config.SparkConfig.executor_extra_java_options" href="#baskerville.models.config.SparkConfig.executor_extra_java_options">executor_extra_java_options</a></code></li>
<li><code><a title="baskerville.models.config.SparkConfig.jar_packages" href="#baskerville.models.config.SparkConfig.jar_packages">jar_packages</a></code></li>
<li><code><a title="baskerville.models.config.SparkConfig.jars" href="#baskerville.models.config.SparkConfig.jars">jars</a></code></li>
<li><code><a title="baskerville.models.config.SparkConfig.jars_repositories" href="#baskerville.models.config.SparkConfig.jars_repositories">jars_repositories</a></code></li>
<li><code><a title="baskerville.models.config.SparkConfig.kryoserializer_buffer" href="#baskerville.models.config.SparkConfig.kryoserializer_buffer">kryoserializer_buffer</a></code></li>
<li><code><a title="baskerville.models.config.SparkConfig.kryoserializer_buffer_max" href="#baskerville.models.config.SparkConfig.kryoserializer_buffer_max">kryoserializer_buffer_max</a></code></li>
<li><code><a title="baskerville.models.config.SparkConfig.log_conf" href="#baskerville.models.config.SparkConfig.log_conf">log_conf</a></code></li>
<li><code><a title="baskerville.models.config.SparkConfig.log_level" href="#baskerville.models.config.SparkConfig.log_level">log_level</a></code></li>
<li><code><a title="baskerville.models.config.SparkConfig.master" href="#baskerville.models.config.SparkConfig.master">master</a></code></li>
<li><code><a title="baskerville.models.config.SparkConfig.metrics_conf" href="#baskerville.models.config.SparkConfig.metrics_conf">metrics_conf</a></code></li>
<li><code><a title="baskerville.models.config.SparkConfig.parallelism" href="#baskerville.models.config.SparkConfig.parallelism">parallelism</a></code></li>
<li><code><a title="baskerville.models.config.SparkConfig.serializer" href="#baskerville.models.config.SparkConfig.serializer">serializer</a></code></li>
<li><code><a title="baskerville.models.config.SparkConfig.session_timezone" href="#baskerville.models.config.SparkConfig.session_timezone">session_timezone</a></code></li>
<li><code><a title="baskerville.models.config.SparkConfig.shuffle_partitions" href="#baskerville.models.config.SparkConfig.shuffle_partitions">shuffle_partitions</a></code></li>
<li><code><a title="baskerville.models.config.SparkConfig.spark_driver_memory" href="#baskerville.models.config.SparkConfig.spark_driver_memory">spark_driver_memory</a></code></li>
<li><code><a title="baskerville.models.config.SparkConfig.spark_executor_cores" href="#baskerville.models.config.SparkConfig.spark_executor_cores">spark_executor_cores</a></code></li>
<li><code><a title="baskerville.models.config.SparkConfig.spark_executor_instances" href="#baskerville.models.config.SparkConfig.spark_executor_instances">spark_executor_instances</a></code></li>
<li><code><a title="baskerville.models.config.SparkConfig.spark_executor_memory" href="#baskerville.models.config.SparkConfig.spark_executor_memory">spark_executor_memory</a></code></li>
<li><code><a title="baskerville.models.config.SparkConfig.spark_python_profile" href="#baskerville.models.config.SparkConfig.spark_python_profile">spark_python_profile</a></code></li>
<li><code><a title="baskerville.models.config.SparkConfig.storage_level" href="#baskerville.models.config.SparkConfig.storage_level">storage_level</a></code></li>
<li><code><a title="baskerville.models.config.SparkConfig.validate" href="#baskerville.models.config.SparkConfig.validate">validate</a></code></li>
</ul>
</li>
</ul>
</li>
</ul>
</nav>
</main>
<footer id="footer">
<p>Generated by <a href="https://pdoc3.github.io/pdoc"><cite>pdoc</cite> 0.7.2</a>.</p>
</footer>
<script src="https://cdnjs.cloudflare.com/ajax/libs/highlight.js/9.12.0/highlight.min.js"></script>
<script>hljs.initHighlightingOnLoad()</script>
</body>
</html>